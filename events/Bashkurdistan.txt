# Russia events by soclib
add_namespace = bkn

country_event = { #Initial event
	id = bkn.1
	immediate = { 
		log = "[GetDateText]: [Root.GetName]: event bkn.1" 
		hidden_effect = {
			TRK = { 
				country_event = {
					id = bkn.12
					days = 2
					random = 72
				}
			}
		}
	}
	title = bkn.1.t
	desc = bkn.1.d

	is_triggered_only = yes
	picture = GFX_report_event_BKN_bashkurdistan

	option = {
		name = bkn.1.a
		add_political_power = 25
		country_event = {
			id = bkn.2
			days = 1
		}
	}
}
country_event = { #Initial event
	id = bkn.2
	immediate = { log = "[GetDateText]: [Root.GetName]: event bkn.2" }
	title = bkn.2.t
	desc = bkn.2.d

	is_triggered_only = yes
	picture = GFX_report_event_BKN_tagan

	option = {
		name = bkn.2.a
		1195 = {
			set_victory_points = {
				province = 1378
				value = 5
			}
		}	
		set_capital = { state = 1195 remember_old_capital = yes }
		add_popularity = { ideology = paternal_autocrat popularity = 0.05 }
		country_event = {
			id = bkn.3
			days = 2
		}
	}
}
country_event = { #Initial event
	id = bkn.3
	immediate = { log = "[GetDateText]: [Root.GetName]: event bkn.3" }
	title = bkn.3.t
	desc = bkn.3.d

	is_triggered_only = yes
	picture = GFX_report_event_BKN_sterlitamak

	option = {
		name = bkn.3.a
		add_stability = 0.1
		add_war_support = 0.05
		var:1194.owner = { country_event = bkn.4 }
		1194 = {
			teleport_armies = { to_state = 651 }
			transfer_state_to = BKN
			hidden_effect = {
				if = {
					limit = { country_exists = RUS }
					remove_core_of = RUS
					add_claim_by = RUS
				}
				if = {
					limit = { country_exists = RVA }
					remove_core_of = RVA
					add_claim_by = RVA
				}
				if = {
					limit = { country_exists = WRA }
					remove_core_of = WRA
					add_claim_by = WRA
				}
				if = {
					limit = { country_exists = RRF }
					remove_core_of = RRF
					add_claim_by = RRF
				}
			}
		}
		hidden_effect = {
			country_event = {
				id = bkn.5
				days = 3
			}	
		}
	}
}
country_event = { #Initial event
	id = bkn.4
	immediate = { log = "[GetDateText]: [Root.GetName]: event bkn.4" }
	title = bkn.4.t
	desc = bkn.4.d

	is_triggered_only = yes
	picture = GFX_report_event_BKN_sterlitamak

	option = {
		name = bkn.4.a
		add_political_power = -25
		add_command_power = -15
	}
}
country_event = { #Initial event
	id = bkn.5
	immediate = { 
		log = "[GetDateText]: [Root.GetName]: event bkn.5" 
		hidden_effect = {
			BKN_setup_ufa_battle = yes
			RUS = { country_event = bkn.10 }			
		}
	}
	title = bkn.5.t
	desc = bkn.5.d

	is_triggered_only = yes
	picture = GFX_report_event_BKN_ufa

	option = {
		name = bkn.5.a
		unlock_decision_category_tooltip = BKN_battle_for_ufa_decisions
		effect_tooltip = { activate_mission = BKN_prepare_for_the_battle }
		random_list = {
			45 = { 
				country_event = {
					id = bkn.7
					days = 5
				}
			}
			40 = { 
				country_event = {
					id = bkn.6
					days = 5
				}
			}
			15 = { 
				country_event = {
					id = bkn.8
					days = 5
				}
			}
		}
	}
	option = {
		name = bkn.5.b
		unlock_decision_category_tooltip = BKN_battle_for_ufa_decisions
		add_stability = -0.05
		add_popularity = { ideology = radical_socialist popularity = -0.05 }
		effect_tooltip = { activate_mission = BKN_prepare_for_the_battle }
	}
}
country_event = { #Initial event
	id = bkn.6
	immediate = { 
		log = "[GetDateText]: [Root.GetName]: event bkn.6" 
		hidden_effect = {
			XXA = {
				random_unit_leader = {
					limit = { has_id = 68606 }
					set_nationality = RUS
				}
			}
			RUS = { country_event = bkn.6 }
		}
		
	}
	title = bkn.6.t
	desc = bkn.6.d

	is_triggered_only = yes
	picture = GFX_report_event_BKN_manatov

	option = {
		name = bkn.6.a
		trigger = { tag = BKN }
		add_popularity = { ideology = radical_socialist popularity = 0.1 }
		add_war_support = 0.05	
		set_temp_variable = { var_change = -3 }
		BKN_change_ufa_defense = yes
		set_country_flag = BKN_ufa_battle_hodayberzin
		RUS = {
			random_unit_leader = {
				limit = { has_id = 68606 }
				set_nationality = BKN
			}
		}
	}
	option = {
		name = bkn.6.b
		trigger = { tag = RUS }
		add_political_power = -25
		effect_tooltip = {
			random_unit_leader = {
				limit = { has_id = 68606 }
				set_nationality = BKN
			}
			BKN = {
				set_temp_variable = { var_change = -3 }
				BKN_change_ufa_defense = yes
			}
		}
	}
}
country_event = { #Initial event
	id = bkn.7
	immediate = { 
		log = "[GetDateText]: [Root.GetName]: event bkn.7" 
		hidden_effect = {
			RUS = { country_event = bkn.7 }
		}
		
	}
	title = bkn.7.t
	desc = bkn.7.d

	is_triggered_only = yes
	picture = GFX_report_event_BKN_yumagolov

	option = {
		name = bkn.7.a
		trigger = { tag = BKN }
		add_popularity = { ideology = social_democrat popularity = 0.1 }
		add_stability = 0.05	
		set_temp_variable = { var_change = -2 }
		BKN_change_ufa_defense = yes
		set_country_flag = BKN_ufa_battle_yomagolov_joined_us
	}
	option = {
		name = bkn.7.b
		trigger = { tag = RUS }
		add_political_power = -15
		effect_tooltip = {
			BKN = {
				set_temp_variable = { var_change = -2 }
				BKN_change_ufa_defense = yes
			}
		}
	}
}
country_event = { #Initial event
	id = bkn.8
	immediate = { log = "[GetDateText]: [Root.GetName]: event bkn.8" }
	title = bkn.8.t
	desc = bkn.8.d

	is_triggered_only = yes
	picture = GFX_report_event_BKN_manatov

	option = {
		name = bkn.8.a
		trigger = { tag = BKN }
		add_popularity = { ideology = radical_socialist popularity = -0.1 }
		add_popularity = { ideology = social_democrat popularity = -0.1 }
		add_stability = -0.05		
		set_country_flag = BKN_ufa_battle_irek_joined_us
	}
}
country_event = { #Initial event
	id = bkn.9
	immediate = { log = "[GetDateText]: [Root.GetName]: event bkn.9" }
	title = bkn.9.t
	desc = bkn.9.d

	is_triggered_only = yes
	picture = GFX_report_event_BKN_tagan

	option = {
		name = bkn.9.a
	}
}
country_event = { #Initial event
	id = bkn.10
	immediate = { 
		log = "[GetDateText]: [Root.GetName]: event bkn.10"
		hidden_effect = {
			activate_mission = BKN_prepare_for_the_battle_RUS
			BKN = { activate_mission = BKN_prepare_for_the_battle }
		}
	}
	title = bkn.10.t
	desc = bkn.10.d

	is_triggered_only = yes
	picture = GFX_report_event_BKN_tagan

	option = {
		name = bkn.10.a
		unlock_decision_category_tooltip = BKN_battle_for_ufa_RUS_decisions
		effect_tooltip = { activate_mission = BKN_prepare_for_the_battle_RUS }
	}
}
country_event = { #Initial event
	id = bkn.11
	immediate = { log = "[GetDateText]: [Root.GetName]: event bkn.11" }
	title = bkn.11.t
	desc = bkn.11.d

	is_triggered_only = yes
	picture = GFX_report_event_BKN_validi

	option = {
		name = bkn.11.a
		add_popularity = { ideology = syndicalist popularity = 0.05 }
	}
}
country_event = { #Initial event
	id = bkn.12
	immediate = { 
		log = "[GetDateText]: [Root.GetName]: event bkn.12" 
		hidden_effect = {
			BKN = { country_event = bkn.11 }
		}
	}
	title = bkn.12.t
	desc = bkn.12.d

	is_triggered_only = yes
	picture = GFX_report_event_BKN_validi

	option = {
		name = bkn.12.a
		if = {
			limit = { has_event_target = tashkent }
			TSK = {
				random_unit_leader = {
					limit = { has_id = 68626 }
					set_nationality = BKN
				}
			}
		}
		else_if = {
			limit = { has_unit_leader = 68626 }
			random_unit_leader = {
				limit = { has_id = 68626 }
				set_nationality = BKN
			}
		}
		else = {
			hidden_effect = {
				XXA = {
					random_unit_leader = {
						limit = { has_id = 68626 }
						set_nationality = BKN
					}
				}
			}
		}
	}
}
country_event = { #Initial event
	id = bkn.13
	immediate = { 
		log = "[GetDateText]: [Root.GetName]: event bkn.13" 
		hidden_effect = {
			RUS = { country_event = bkn.14 }
		}
	}
	title = bkn.13.t
	desc = bkn.13.d

	is_triggered_only = yes
	picture = GFX_report_event_BKN_ufa

	option = {
		name = bkn.13.a
		651 = { transfer_state_to = ROOT }
		set_capital = { state = 651 remember_old_capital = no }
		if = {
			limit = { has_country_flag = BKN_ufa_battle_yomagolov_joined_us }
			add_popularity = { ideology = radical_socialist popularity = -0.15 }
		}
		else_if = {
			limit = { has_country_flag = BKN_ufa_battle_hodayberzin }
			add_popularity = { ideology = totalist popularity = -0.1 }
		}
		else = {
			add_popularity = { ideology = radical_socialist popularity = -0.15 }
			add_popularity = { ideology = social_democrat popularity = -0.05 }
		}
		clr_country_flag = BKN_battle_for_ufa_ongoing
		effect_tooltip = { unlock_national_focus = BKN_Convene_Qurultai }
	}
}
country_event = { #Initial event
	id = bkn.14
	immediate = { log = "[GetDateText]: [Root.GetName]: event bkn.14" }
	title = bkn.14.t
	desc = bkn.14.d

	is_triggered_only = yes
	picture = GFX_report_event_BKN_ufa

	option = {
		name = bkn.14.a
		effect_tooltip = {
			651 = { transfer_state_to = ROOT }
		}
		add_stability = -0.05
		decrease_ruling_party_popularity_by_5 = yes
	}
}
country_event = { #Initial event
	id = bkn.15
	immediate = { 
		log = "[GetDateText]: [Root.GetName]: event bkn.15" 
		hidden_effect = {
			RUS = { country_event = bkn.16 }
		}
	}
	title = bkn.15.t
	desc = bkn.15.d

	is_triggered_only = yes
	picture = GFX_report_event_BKN_ufa

	option = {
		name = bkn.15.a
		651 = { transfer_state_to = ROOT }
		set_capital = { state = 651 remember_old_capital = no }
		if = {
			limit = { has_country_flag = BKN_ufa_battle_hodayberzin }
			add_popularity = { ideology = totalist popularity = 0.15 }
			set_politics = { ruling_party = totalist }
			remove_all_ministers = yes
			add_ideas = {
				BKN_Shahit_Hozaybirzin_hog_tot
				BKN_Afzal_Tahirov_for_tot
				BKN_Hafiz_Qusayev_eco_tot
				BKN_Gali_Samigolov_sec_tot
			}
			RUS = { SOV_puppet_ROOT_effect = yes }
		}
		else_if = {
			limit = { has_country_flag = BKN_ufa_battle_yomagolov_joined_us }
			add_popularity = { ideology = radical_socialist popularity = 0.10 }
			set_politics = { ruling_party = radical_socialist }
			add_tot_to_coalition = yes
			remove_all_ministers = yes
			add_ideas = {
				BKN_Sharif_Manatov_hog_rso
				BKN_Zinatulla_Bulashev_for_rso
				BKN_Akhmazulla_Beyyesev_eco_rso
				BKN_Mullayan_Haliqov_sec_rso
			}
			give_military_access = RUS
			RUS = {
				give_guarantee = ROOT
				diplomatic_relation = {
					country = ROOT
					relation = non_aggression_pact
					active = no
				}
			}
		}
		else = {
			add_popularity = { ideology = radical_socialist popularity = 0.05 }
			add_popularity = { ideology = social_democrat popularity = 0.05 }
			set_politics = { ruling_party = radical_socialist }
			add_tot_to_coalition = yes
			add_socdem_to_coalition = yes
			remove_all_ministers = yes
			add_ideas = {
				BKN_Sharif_Manatov_hog_rso
				BKN_Zinatulla_Bulashev_for_rso
				BKN_Akhmazulla_Beyyesev_eco_rso
				BKN_Kharis_Yumagulov_sec_sde
			}
			give_military_access = RUS
			RUS = {
				give_guarantee = ROOT
				diplomatic_relation = {
					country = ROOT
					relation = non_aggression_pact
					active = no
				}
			}
		}
		clr_country_flag = BKN_battle_for_ufa_ongoing		
		delete_unit_template_and_units = {
			division_template = "Irekle Otryadtary"
			disband = no #will refund equipment and manpower
		}
		disband_twenty_percent_units = yes		
		division_template = {
			name = "Qyzyl Gvardiya"
			division_names_group = BKN_MIL_01
			is_locked = yes

			regiments = {
				irregular_infantry = { x = 0 y = 0 }
				irregular_infantry = { x = 0 y = 1 }
				irregular_infantry = { x = 0 y = 2 }
			}
		}
		random_owned_controlled_state = {
			prioritize = { 651 }
			limit = { valid_state_for_spawning_friendly_unit = yes }
			create_unit = {
				division = "division_template = \"Qyzyl Gvardiya\" start_experience_factor = 0.2 start_equipment_factor = 1"
				owner = ROOT
				count = 3
			}
		}
		random_owned_controlled_state = {
			prioritize = { 1194 }
			limit = { valid_state_for_spawning_friendly_unit = yes }
			create_unit = {
				division = "division_template = \"Qyzyl Gvardiya\" start_experience_factor = 0.2 start_equipment_factor = 1"
				owner = ROOT
				count = 2
			}
		}
		random_owned_controlled_state = {
			prioritize = { 1195 }
			limit = { valid_state_for_spawning_friendly_unit = yes }
			create_unit = {
				division = "division_template = \"Qyzyl Gvardiya\" start_experience_factor = 0.2 start_equipment_factor = 1"
				owner = ROOT
				count = 1
			}
		}
		clr_country_flag = KR_set_up_ai_templates
		mark_focus_tree_layout_dirty = yes
	}
}
country_event = { #Initial event
	id = bkn.14
	immediate = { log = "[GetDateText]: [Root.GetName]: event bkn.14" }
	title = bkn.14.t
	desc = bkn.14.d

	is_triggered_only = yes
	picture = GFX_report_event_BKN_ufa

	option = {
		name = bkn.14.a
		effect_tooltip = {
			651 = { transfer_state_to = ROOT }
		}
		add_stability = -0.05
		decrease_ruling_party_popularity_by_5 = yes
	}
}