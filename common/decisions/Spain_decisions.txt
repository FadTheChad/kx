# Spain decisions

political_actions = {

	CAR_assassinate_juan = {
		icon = generic_prepare_civil_war

		allowed = {
			tag = CAR
		}

		available = {
			FROM = {
				has_country_leader = { name = "Alfonso XIII" }
			}
		}

		targets = { SPR }
		target_trigger = {
			has_war_with = FROM
		}

		visible = {
			has_war_with = FROM
		}

		fire_only_once = yes

		cost = 20
		days_remove = 60

		ai_will_do = {
			factor = 10
		}

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision CAR_assassinate_juan target: [From.GetName]"
		}
		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove CAR_assassinate_juan target: [From.GetName]"
			country_event = sprc.306
		}
	}
	CAR_centro_syndicalist_war = {
		icon = generic_ignite_civil_war

		allowed = {
			original_tag = CAR
		}

		available = {
			ROOT = { controls_all_owned_states = yes }
			has_completed_focus = CAR_conquer_centro
			has_country_flag = CAR_centro_wars_unlocked
			FROM = {
				NOT = {
					is_in_faction_with = CAR
					has_war_together_with = CAR
				}
				has_socialist_government = yes
			}
		}

		visible = {
			date > 1939.1.1
			has_completed_focus = CAR_new_reconquista
			is_subject = no
			FROM = {
				NOT = {
					has_war_with = CAR
					is_subject_of = CAR
				}
				OR = {
					owns_state = 316 #Costa Rica
					owns_state = 304 #Panama
					owns_state = 317 #Nicaragua
					owns_state = 842 #Honduras
					owns_state = 314 #El Salvador
					owns_state = 313 #Guatemala
				}
				has_socialist_government = yes
			}
		}

		target_root_trigger = {
			has_completed_focus = CAR_conquer_centro
		}

		target_trigger = {
			FROM = {
				NOT = {
					has_war_with = CAR
					is_subject_of = CAR
				}
				OR = {
					owns_state = 316 #Costa Rica
					owns_state = 304 #Panama
					owns_state = 317 #Nicaragua
					owns_state = 842 #Honduras
					owns_state = 314 #El Salvador
					owns_state = 313 #Guatemala
				}
			}
		}

		cancel_trigger = {
			FROM = {
				OR = {
					has_war_with = CAR
					is_subject_of = CAR
					NOT = {
						owns_state = 316 #Costa Rica
						owns_state = 304 #Panama
						owns_state = 317 #Nicaragua
						owns_state = 842 #Honduras
						owns_state = 314 #El Salvador
						owns_state = 313 #Guatemala
					}
				}
			}
		}

		fire_only_once = yes
		days_remove = 60
		war_with_target_on_remove = yes

		cost = 60

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision CAR_centro_syndicalist_war target: [From.GetName]"
			add_war_support = 0.01
		}
		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove CAR_centro_syndicalist_war target: [From.GetName]"
			declare_war_on = {
				target = FROM
				type = annex_everything
			}
		}

		ai_will_do = {
			factor = 1
			modifier = {
				factor = 0
				has_war = yes
			}
			modifier = {
				factor = 0
				strength_ratio = { tag = FROM ratio < 0.33 }
			}
			modifier = {
				factor = 0
				is_in_faction = no
				strength_ratio = { tag = FROM ratio < 1.0 }
				FROM = {
					OR = {
						has_war = no
						surrender_progress < 0.25
					}
				}
			}
		}
	}
}

SPR_intro_politics = {
	SPR_organize_strike = {
		icon = generic_ignite_civil_war
		
		cost = 50
		fire_only_once = no
		days_remove = 50
		
		available = {
		}
		visible = {
			is_power_balance_side_active = {
				id = SPR_burning_house_of_cards
				side = SPR_leftcenter_side
			}
		}
		allowed = {
		}
		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove SPR_organize_strike"
			add_power_balance_value = {
				id = SPR_burning_house_of_cards
				value = -0.05
				tooltip_side = SPR_leftcenter_side
			}
		}
		ai_will_do = {
			factor = 1
		}
	}
	SPR_CNT_FAI_talks = {
		icon = generic_ignite_civil_war
		
		cost = 100
		fire_only_once = yes
		days_remove = 14
		
		available = {
			OR = {
				AND = {
					is_power_balance_side_active = {
						id = SPR_burning_house_of_cards
						side = SPR_leftcenter_side
					}
					has_completed_focus = SPR_Favor_Unions
				}
				AND = {
					is_power_balance_side_active = {
						id = SPR_burning_house_of_cards
						side = SPR_center_side
					}
					has_completed_focus = SPR_Deals_With_The_CNTFAI
				}
			}
		}
		visible = {
		}
		allowed = {
			OR = {
				AND = {
					is_power_balance_side_active = {
						id = SPR_burning_house_of_cards
						side = SPR_leftcenter_side
					}
					has_completed_focus = SPR_Favor_Unions
				}
				AND = {
					is_power_balance_side_active = {
						id = SPR_burning_house_of_cards
						side = SPR_center_side
					}
					has_completed_focus = SPR_Deals_With_The_CNTFAI
				}
			}
		}
		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove SPR_CNT_FAI_talks"
			set_temp_variable = { tempSynd = party_popularity_100@syndicalist}
			set_temp_variable = { tempPatAut = party_popularity_100@paternal_autocrat}
			set_temp_variable = { tempNatPop = party_popularity_100@national_populist}
			add_to_variable = { tempPatAut = tempNatPop }
			random_list = {
				tempSynd = {
					set_country_flag = SPR_bop_CNT_FAI_support
					
					add_synd_to_coalition = yes
					add_political_power = 10
					add_stability = 0.025
					add_popularity = {
						ideology = totalist
						popularity = 0.02
					}
					add_popularity = {
						ideology = syndicalist
						popularity = 0.075
					}
					add_popularity = {
						ideology = radical_socialist
						popularity = 0.02
					}
					add_popularity = {
						ideology = authoritarian_democrat
						popularity = -0.05
					}
					add_power_balance_value = {
						id = SPR_burning_house_of_cards
						value = -0.1
					}
				}
				tempPatAut = {
					set_country_flag = SPR_bop_CNT_FAI_support_failed
					
					add_political_power = -100
					add_stability = -0.05
					add_popularity = {
						ideology = totalist
						popularity = 0.01
					}
					add_popularity = {
						ideology = syndicalist
						popularity = 0.02
					}
					add_popularity = {
						ideology = radical_socialist
						popularity = -0.025
					}
					add_popularity = {
						ideology = authoritarian_democrat
						popularity = -0.075
					}
					add_popularity = {
						ideology = paternal_autocrat
						popularity = 0.1
					}
					add_popularity = {
						ideology = national_populist
						popularity = 0.025
					}
					add_power_balance_value = {
						id = SPR_burning_house_of_cards
						value = 0.15
					}
				}
			}
		}
		ai_will_do = {
			factor = 20
		}
	}
	SPR_crack_down_on_the_right = {
		icon = generic_ignite_civil_war
		
		cost = 75
		fire_only_once = no
		days_remove = 30
		
		available = {
		}
		visible = {
			OR = {
				is_power_balance_side_active = {
					id = SPR_burning_house_of_cards
					side = SPR_leftcenter_side
				}
				is_power_balance_side_active = {
					id = SPR_burning_house_of_cards
					side = SPR_center_side
				}
			}
		}
		allowed = {
		}
		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove SPR_crack_down_on_the_right"
			add_power_balance_value = {
				id = SPR_burning_house_of_cards
				value = -0.075
			}
			add_war_support = -0.02
			add_political_power = 10
			add_popularity = {
				ideology = paternal_autocrat
				popularity = -0.05
			}
		}
		ai_will_do = {
			factor = 1
		}
	}
	SPR_distance_from_the_CNT_FAI = {
		icon = generic_ignite_civil_war
		
		cost = 25
		fire_only_once = no
		days_re_enable = party_popularity_100@authoritarian_democrat
		
		available = {
		}
		visible = {
			AND = {
				OR = {
					is_power_balance_side_active = {
						id = SPR_burning_house_of_cards
						side = SPR_leftcenter_side
					}
					is_power_balance_side_active = {
						id = SPR_burning_house_of_cards
						side = SPR_center_side
					}
				}
				party_popularity_100@syndicalist > party_popularity_100@authoritarian_democrat - 15
				set_temp_variable = { coalition_target = token:syndicalist }
				has_coalition_with_target = yes
			}
		}
		allowed = {
		}
		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision SPR_distance_from_the_CNT_FAI"
			add_power_balance_value = {
				id = SPR_burning_house_of_cards
				value = 0.1
			}
			add_stability = 0.01
			add_popularity = {
				ideology = syndicalist
				popularity = -0.075
			}
			add_popularity = {
				ideology = radical_socialist
				popularity = 0.015
			}
			add_popularity = {
				ideology = social_democrat
				popularity = 0.01
			}
			add_popularity = {
				ideology = authoritarian_democrat
				popularity = 0.05
			}
		}
		ai_will_do = {
			factor = 1
		}
	}
	SPR_attack_JONS = {
		icon = generic_ignite_civil_war
		
		cost = 30
		fire_only_once = no
		days_re_enable = 14
		
		available = {
		}
		visible = {
			AND = {
				OR = {
					is_power_balance_side_active = {
						id = SPR_burning_house_of_cards
						side = SPR_leftcenter_side
					}
					is_power_balance_side_active = {
						id = SPR_burning_house_of_cards
						side = SPR_center_side
					}
				}
				party_popularity_100@totalist > party_popularity_100@syndicalist
				set_temp_variable = { coalition_target = token:syndicalist }
				has_coalition_with_target = yes
			}
		}
		allowed = {
		}
		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision SPR_attack_JONS"
			add_power_balance_value = {
				id = SPR_burning_house_of_cards
				value = 0.04
			}
			add_stability = 0.03
			add_popularity = {
				ideology = totalist
				popularity = -0.05
			}
			add_popularity = {
				ideology = syndicalist
				popularity = 0.03
			}
			add_popularity = {
				ideology = radical_socialist
				popularity = 0.01
			}
			add_popularity = {
				ideology = social_democrat
				popularity = 0.01
			}
			add_popularity = {
				ideology = authoritarian_democrat
				popularity = 0.02
			}
		}
		ai_will_do = {
			factor = 1
		}
	}
	SPR_crack_down_on_the_left = {
		icon = generic_ignite_civil_war
		
		cost = 75
		fire_only_once = no
		days_re_enable = 30
		
		available = {
		}
		visible = {
			OR = {
				is_power_balance_side_active = {
					id = SPR_burning_house_of_cards
					side = SPR_rightcenter_side
				}
				is_power_balance_side_active = {
					id = SPR_burning_house_of_cards
					side = SPR_center_side
				}
			}
		}
		allowed = {
		}
		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision SPR_crack_down_on_the_left"
			add_power_balance_value = {
				id = SPR_burning_house_of_cards
				value = -0.075
			}
			add_stability = -0.02
			add_political_power = 10
			add_popularity = {
				ideology = syndicalist
				popularity = -0.05
			}
		}
		ai_will_do = {
			factor = 1
		}
	}
}