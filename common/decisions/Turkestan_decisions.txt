TRK_Economy_decisions = {
	TRK_remove_food_shortage = {
		allowed = { always = no }
		icon = GFX_decision_generic_agriculture
		available = { has_idea = KHI_shortage_of_food }
		cost = 50
		days_remove = 50
		fire_only_once = yes
		ai_will_do = {
			factor = 100
		}
		
		modifier = {
			consumer_goods_factor = 0.1
			political_power_cost = 0.15
		}
		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove TRK_remove_food_shortage target: [From.GetName]"
			remove_ideas = KHI_shortage_of_food
			add_stability = 0.05
		}
	}
}
		
TRK_unite_central_asia = {
	TRK_ally_country = {
		allowed = { 
			OR = {
				tag = KHI
				tag = KYR
				tag = TRK
				tag = TAJ
			}
		}
		visible = { is_subject = no }
		available = {
			is_subject = no
			is_faction_leader = yes
		}
		targets = { KHI KYR TRK TAJ }
		target_root_trigger = {
			is_faction_leader = yes
		}
		target_trigger = {
			FROM = {
				is_ai = yes
				same_government_type_as_ROOT_authoritarian = yes
				NOT = { has_completed_focus = KHI_The_Khanate_Lives_On }
				NOT = { has_completed_focus = TRK_Tighten_Grip_Over_Bukhara }
			}
		}
		cost = 0
		days_remove = 7
		fire_only_once = yes
		ai_will_do = {
			factor = 2000
		}
		remove_effect = {
			add_to_faction = FROM
		}
	}
	TRK_destroy_country = {
		allowed = { 
			OR = {
				tag = KHI
				tag = KYR
				tag = TRK
				tag = TAJ
			}
		}
		visible = { 
			is_subject = no
			can_declare_war_on = FROM
		}
		available = {
			is_subject = no
			is_faction_leader = yes
		}
		targets = { KHI KYR TRK TAJ }
		target_root_trigger = {
			is_faction_leader = yes
		}
		target_trigger = {
			FROM = {
				OR = {
					same_government_type_as_ROOT_authoritarian = no
					has_completed_focus = KHI_The_Khanate_Lives_On
					has_completed_focus = TRK_Tighten_Grip_Over_Bukhara
				}
			}
			can_declare_war_on = FROM
		}
		cost = 10
		fire_only_once = yes
		days_remove = 14
		war_with_target_on_remove = yes
		ai_will_do = {
			factor = 2000
		}
		cancel_effect = {
			clear_decision_attack_AI = yes
			add_political_power = 10
		}
		complete_effect = {
			set_country_flag = { flag = imminent_war days = 20 value = 1 }
			setup_decision_attack_AI = yes
		}
		remove_effect = {
			clear_decision_attack_AI = yes
			declare_war_on = {
				target = FROM
				type = annex_everything
			}
			hidden_effect = {
				country_event = {
					id = turkestan.23
					days = 180
				}
			}
		}
	}
	TRK_proclaim_unified_turkestan = {
		allowed = {
			OR = {
				tag = KHI
				tag = KYR
				tag = TRK
				tag = TAJ
			}
		}
		visible = {
			OR = {
				tag = KHI
				tag = KYR
				tag = TRK
				tag = TAJ
			}
			is_subject = no
		}
		available = {
			405 = {
				is_owned_by_ROOT_or_ally  = yes
			}
			407 = {
				is_owned_by_ROOT_or_ally  = yes
			}
			861 = {
				is_owned_by_ROOT_or_ally  = yes
			}
			is_faction_leader = yes
		}
		cost = freedec?0
		fire_only_once = yes
		ai_will_do = {
			factor = 2000
			modifier = {
				factor = 0
				TRK_other_tags_are_ai = no
			}
		}
		remove_effect = {
			if = {
				limit = {
					tag = KHI
				}
				annex_country = {
					target = KYR
					transfer_troops = yes
				}
				annex_country = {
					target = TAJ
					transfer_troops = yes
				}
				annex_country = {
					target = TRK
					transfer_troops = yes
				}
				dismantle_faction = yes
				set_cosmetic_tag = KHI_united
				set_country_flag = TRK_turkestan_united
				set_global_flag = global_turkestan_united
				KHI = { save_global_event_target_as = turkestan_unifier }
			}
			else_if = {
				limit = {
					OR = {
						tag = KYR
						tag = TAJ
					}
				}
				annex_country = {
					target = KHI
					transfer_troops = yes
				}
				annex_country = {
					target = TAJ
					transfer_troops = yes
				}
				annex_country = {
					target = TRK
					transfer_troops = yes
				}
				dismantle_faction = yes
				if = { 
					limit = { NOT = { has_cosmetic_tag = ALO_CAF } }
					set_cosmetic_tag = KYR_united
				}
				set_country_flag = TRK_turkestan_united
				set_global_flag = global_turkestan_united
				if = {
					limit = {
						tag = TAJ
					}
					TAJ = { save_global_event_target_as = turkestan_unifier }
				}
				else = {
					KYR = { save_global_event_target_as = turkestan_unifier }
				}
			}
			else_if = {
				limit = {
					tag = TAJ
				}
				annex_country = {
					target = KHI
					transfer_troops = yes
				}
				annex_country = {
					target = TRK
					transfer_troops = yes
				}
				annex_country = {
					target = KYR
					transfer_troops = yes
				}
				dismantle_faction = yes
				set_cosmetic_tag = KYR_united
				set_country_flag = TRK_turkestan_united
				set_global_flag = global_turkestan_united
				KYR = { save_global_event_target_as = turkestan_unifier }
			}
			else = {
				annex_country = {
					target = KHI
					transfer_troops = yes
				}
				annex_country = {
					target = TAJ
					transfer_troops = yes
				}
				annex_country = {
					target = KYR
					transfer_troops = yes
				}
				dismantle_faction = yes
				set_cosmetic_tag = TRK_united
				set_country_flag = TRK_turkestan_united
				set_global_flag = global_turkestan_united
				TRK = { save_global_event_target_as = turkestan_unifier }
			}
			if = {
				limit = {
					has_idea = TRK_fraternization
				}
				remove_ideas = TRK_fraternization
			}
			TRK_setup_united_turkestan = yes
		}
	}
	TRK_ally_alash = {
		allowed = { 
			OR = {
				tag = KHI
				tag = KYR
				tag = TRK
				tag = TAJ
			}
		}
		visible = { is_subject = no }
		available = {
			is_subject = no
		}
		cost = 25
		days_remove = 14
		fire_only_once = yes
		ai_will_do = {
			factor = 100
		}
		targets = { ALO }
		target_root_trigger = {
			has_country_flag = TRK_turkestan_united
			405 = {
				is_owned_by_ROOT_or_ally  = yes
			}
			407 = {
				is_owned_by_ROOT_or_ally  = yes
			}
			861 = {
				is_owned_by_ROOT_or_ally  = yes
			}
		}
		target_trigger = {
			FROM = {
				same_government_type_as_ROOT_authoritarian = yes
				is_subject = no
			}
		}
		remove_effect = {
			FROM = {
				country_event = {
					id = turkestan.14
					days = 2
				}
			}
		}
	}
	TRK_destroy_alash = {
		allowed = { 
			OR = {
				tag = KHI
				tag = KYR
				tag = TRK
				tag = TAJ
			}
		}
		visible = { 
			is_subject = no
			can_declare_war_on = FROM
		}
		available = {
			is_subject = no
		}
		available = {
			OR = {
				has_elected_government = no
				has_country_flag = ALO_declined_alliance
			}
			if = {
				limit = {
					FROM = { is_subject_of = RUS }
				}
				NOT = { has_global_flag = RUS_UTR_peace }
			}
		}
		cost = 25
		days_remove = 14
		fire_only_once = yes
		war_with_target_on_remove = yes
		ai_will_do = {
			base = 100
			modifier = {
				factor = 0
				ALO = { is_subject = yes }
			}
		}
		targets = { ALO }
		target_root_trigger = {
			has_country_flag = TRK_turkestan_united
			405 = {
				is_owned_by_ROOT_or_ally  = yes
			}
			407 = {
				is_owned_by_ROOT_or_ally  = yes
			}
			861 = {
				is_owned_by_ROOT_or_ally  = yes
			}
		}			
		target_trigger = {
			OR = {
				FROM = {
					same_government_type_as_ROOT_authoritarian = no
				}
				has_country_flag = ALO_declined_alliance
			}
			can_declare_war_on = FROM
		}
		complete_effect = {
			set_country_flag = { flag = imminent_war days = 20 value = 1 }
			setup_decision_attack_AI = yes
			if = {
				limit = {
					FROM = { is_subject = yes }
				}
				custom_effect_tooltip = RUS_may_lead_to_war_with_FROM_overlord
			}
		}
		remove_effect = {
			clear_decision_attack_AI = yes
			declare_war_on = {
				target = FROM
				type = annex_everything
			}
			country_event = {
				id = turkestan.1
				days = 5
			}
		}
	}
	
	#TRK_call_in_Alash = {
	#	visible = {
	#		OR = {
	#			tag = KHI
	#			tag = KYR
	#			tag = TRK
	#		}
	#		NOT = { has_country_flag = TRK_turkestan_united }
	#		is_subject = no
	#	}
	#	available = {
	#		has_war = yes
	#		country_exists = ALO
	#		ALO = { is_subject = no }
	#		ALO = { has_government = social_liberal }
	#	}
	#	cost = 10
	#	days_remove = 7
	#	fire_only_once = yes
	#	ai_will_do = {
	#		factor = 100
	#	}
	#	targets = { ALO } 
	#	remove_effect = {
	#		every_country = {
	#			limit = {
	#				has_war_with = ROOT
	#			}
	#			FROM = {
	#				declare_war_on = {
	#					target = PREV
	#					type = annex_everything
	#				}
	#			}
	#		}
	#	}
	#}
}
TRK_foreign_policy = {
	TRK_peace_with_russia = {
		icon = oppression
		allowed = {
			OR = {
				tag = ALO
				tag = TRK
				tag = TAJ 
				tag = KYR
				tag = KHI
			}
		}
		activation = { #triggered by event
			always = no 
		}
		ai_will_do = {
			factor = 1000
		}
		
		is_good = yes
		selectable_mission = no
		fire_only_once = yes
		days_mission_timeout = 180
		
		timeout_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision timeout TRK_peace_with_russia"
			if = {
				limit = {
					surrender_progress < 0.1
					405 = {
						is_fully_controlled_by = ROOT
					}
					407 = {
						is_fully_controlled_by = ROOT
					}
					861 = {
						is_fully_controlled_by = ROOT
					}
				}
				652 = {
					owner = {
						country_event = rusfor.1464
					}
				}
			}
			else = {
				custom_effect_tooltip = TRK_peace_with_russia_tt
				add_war_support = -0.5
				add_stability = -0.5
				force_capitulate = yes
			}
		}
	}	
}

political_actions = {
	KHI_Demand_State = {
		name = KHI_Demand_State
		icon = eng_trade_unions_demand
		
		allowed = { tag = KHI }
		
		available = {
			FROM = {
				NOT = { is_owned_by = ROOT }
				is_claimed_by = ROOT
			}
		}
		
		cost = 25
		days_remove = 30
		fire_only_once = yes
		
		ai_will_do = {
			factor = 50
		}
		state_target = yes
		target_trigger = {
			FROM = {
				NOT = { is_owned_by = ROOT }
				is_claimed_by = ROOT
			}
		}
		target_root_trigger = {
			has_completed_focus = KHI_Status_Quo
		}

		ai_will_do = {
			factor = 50
			modifier = {
				factor = 0
				RUS_dont_attack_if_vulnerable_or_preparing = yes
			}
			modifier = {
				factor = 0
				FROM = { RUS_dont_attack_if_target_is_stronger = yes }
			}
			modifier = {
				factor = 0
				FROM = { RUS_dont_attack_if_faction_is_stronger = yes }
			}
			modifier = {
				factor = 0
				FROM = { RUS_dont_attack_if_overlord_is_stronger = yes }
			}
		}
		cancel_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision cancel KHI_Demand_State"
			clear_decision_attack_AI = yes
			add_political_power = 25
		}
		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision complete KHI_Demand_State"
			set_country_flag = { flag = imminent_war days = 20 value = 1 }
			setup_decision_attack_AI = yes
		}
		remove_effect = {
			clear_decision_attack_AI = yes
			log = "[GetDateText]: [Root.GetName]: Decision remove KHI_Demand_State"
			declare_war_on = {
				target = FROM.OWNER
				type = annex_everything
			}
		}
	}
	
	TRK_integrate_state_easy = {
		name = integrate_state
		icon = eng_trade_unions_demand

		allowed = { 
			OR = {
				tag = KHI
				tag = KYR
				tag = TRK
				tag = TAJ
			}
		}

		available = {
			FROM = {
				is_controlled_by = ROOT
				if = {
					limit = { has_resistance = yes }
					compliance > 30
				}
			}
		}

		visible = {
			FROM = {
				is_controlled_by = ROOT
				NOT = { is_core_of = ROOT }
			}
		}

		cost = 50
		days_remove = 50
		cancel_if_not_visible = yes

		state_target = yes
		targets = { 589 }
		target_trigger = {
			FROM = {
				is_controlled_by = ROOT
				NOT = { is_core_of = ROOT }
			}
		}

		ai_will_do = {
			factor = 100
		}

		cancel_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision cancel TRK_integrate_state_easy target: [From.GetName]"
			add_political_power = 50
		}

		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove TRK_integrate_state_easy target: [From.GetName]"
			hidden_effect = { remove_state_claim = FROM }
			add_state_core = FROM
		}
	}
	
	ALO_integrate_state_easy = {
		name = integrate_state
		icon = eng_trade_unions_demand

		allowed = { tag = ALO }

		available = {
			FROM = {
				is_controlled_by = ROOT
				if = {
					limit = { has_resistance = yes }
					compliance > 30
				}
			}
		}

		visible = {
			FROM = {
				is_controlled_by = ROOT
				NOT = { is_core_of = ROOT }
			}
		}

		cost = 50
		days_remove = 50
		cancel_if_not_visible = yes

		state_target = yes
		targets = { 236 }
		target_trigger = {
			FROM = {
				is_controlled_by = ROOT
				NOT = { is_core_of = ROOT }
			}
		}

		ai_will_do = {
			factor = 100
		}

		cancel_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision cancel ALO_integrate_state_easy target: [From.GetName]"
			add_political_power = 50
		}

		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove ALO_integrate_state_easy target: [From.GetName]"
			hidden_effect = { remove_state_claim = FROM }
			add_state_core = FROM
			if = {
				limit = {
					FROM = { NOT = { has_state_flag = renamed_state_kazakh } }
				}
				FROM = {
					set_state_flag = renamed_state_kazakh
					set_state_name = "Orda"
					set_province_name = {
						id = 7708
						name = "Orda"
					}
				}
			}			
		}
	}
	ALO_integrate_state_medium = {
		name = integrate_state
		icon = eng_trade_unions_demand

		allowed = { tag = ALO }

		available = {
			FROM = {
				is_controlled_by = ROOT
				if = {
					limit = { has_resistance = yes }
					compliance > 30
				}
			}
		}

		visible = {
			FROM = {
				is_controlled_by = ROOT
				NOT = { is_core_of = ROOT }
			}
		}

		cost = 75
		days_remove = 90
		cancel_if_not_visible = yes

		state_target = yes
		targets = { 582 583 590 588 }
		target_trigger = {
			FROM = {
				is_controlled_by = ROOT
				NOT = { is_core_of = ROOT }
			}
		}

		ai_will_do = {
			factor = 100
		}

		cancel_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision cancel ALO_integrate_state_medium target: [From.GetName]"
			add_political_power = 75
		}

		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove ALO_integrate_state_medium target: [From.GetName]"
			hidden_effect = { remove_state_claim = FROM }
			add_state_core = FROM
			if = {
				limit = {
					FROM = { state = 582 }
					FROM = { NOT = { has_state_flag = renamed_state_kazakh } }
				}
				FROM = {
					set_state_flag = renamed_state_kazakh
					set_state_name = "Zhamanqala"
					set_province_name = {
						id = 4261
						name = "Zhamanqala"
					}
				}
			}
			if = {
				limit = {
					FROM = { state = 583 }
					FROM = { NOT = { has_state_flag = renamed_state_kazakh } }
				}
				FROM = {
					set_state_flag = renamed_state_kazakh
					set_state_name = "Qostanai"
					set_province_name = {
						id = 10284
						name = "Qostanai"
					}
				}
			}
			if = {
				limit = {
					FROM = { state = 590 }
					FROM = { NOT = { has_state_flag = renamed_state_kazakh } }
				}
				FROM = {
					set_state_flag = renamed_state_kazakh
					set_state_name = "Aqmola"
					set_province_name = {
						id = 7874
						name = "Kyzylzhar"
					}
					set_province_name = {
						id = 1375
						name = "Aqmola"
					}
					set_province_name = {
						id = 1418
						name = "Kokşetau"
					}
				}
			}
			if = {
				limit = {
					FROM = { state = 588 }
					FROM = { NOT = { has_state_flag = renamed_state_kazakh } }
				}
				FROM = {
					set_state_flag = renamed_state_kazakh
					set_state_name = "Kereku"
					set_province_name = {
						id = 7708
						name = "Kereku"
					}
				}
			}			
		}
	}
}
KYR_Government = {
	KYR_deal_with_basmachi = {
		allowed = { always = no } #manually activated
		
		available = {
			has_completed_focus = KYR_Convene_Military_Congress
			has_completed_focus = KYR_Army_Rearmament
			has_stability > 0
		}
		cancel_trigger = {
			NOT = { has_idea = KYR_east_pamir_revolt }
		}
		
		selectable_mission = yes
		is_good = no
		fire_only_once = yes
		days_mission_timeout = 120
		ai_hint_pp_cost = 25
		custom_cost_trigger = {
			command_power > 24.99
			has_political_power > 24.99
		}
		custom_cost_text = PP_25_CP_25
		
		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision KYR_deal_with_basmachi"			
		}
		timeout_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision timeout KYR_deal_with_basmachi"
			country_event = kyr.104
		}
	}
	KYR_kadimist_demands = {
		allowed = { always = no } #manually activated
				
		selectable_mission = yes
		is_good = no
		days_mission_timeout = 28
		cost = 15
		cancel_trigger = {
			NOT = { has_country_flag = KYR_unstable_coalition }
		}
		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision KYR_kadimist_demands"
			KYR_increase_kadimist_bop = yes
		}
		timeout_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision timeout KYR_kadimist_demands"
			KYR_decrease_coalition_strength = yes
		}
	}
	KYR_fortify_fergana = {
		allowed = { always = no } #manually activated
				
		available = {
			FROM = { is_owned_and_controlled_by = ROOT }
		}
		visible = {
			FROM = { is_owned_and_controlled_by = ROOT }
		}
		highlight_states = { 
			highlight_state_targets = {
				state = FROM 
			}
		}
		cost = 15
		days_remove = 45
		fire_only_once = yes
		state_target = yes
		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision timeout KYR_Fortify_Fergana"
			add_manpower = 3000
			FROM = {
				add_building_construction = {
					type = bunker
					province = 14728
					level = 1
					instant_build = yes
				}
				add_building_construction = {
					type = bunker
					province = 14731
					level = 1
					instant_build = yes
				}
				add_building_construction = {
					type = bunker
					province = 14732
					level = 2
					instant_build = yes
				}
				add_building_construction = {
					type = bunker
					province = 14733
					level = 1
					instant_build = yes
				}
			}
			KYR_increase_coalition_strength = yes			
		}
	}
	KYR_buy_small_arms = {
		allowed = { always = no } #manually activated
				
		available = {
			FROM = { at_peace_or_same_enemies_as_FROM = yes }
		}
		visible = {
			FROM = { at_peace_or_same_enemies_as_FROM = yes }
		}
		cost = 15
		days_remove = 15
		fire_only_once = yes
		
		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision timeout KYR_buy_small_arms"
			add_equipment_to_stockpile = {
				type = infantry_equipment
				amount = 500
				producer = FROM
			}		
		}
	}
	KYR_buy_artillery = {
		allowed = { always = no } #manually activated
				
		available = {
			FROM = { at_peace_or_same_enemies_as_FROM = yes }
		}
		visible = {
			FROM = { at_peace_or_same_enemies_as_FROM = yes }
		}
		cost = 25
		days_remove = 30
		fire_only_once = yes
		
		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision timeout KYR_buy_artillery"
			add_equipment_to_stockpile = {
				type = artillery_equipment
				amount = 500
				producer = FROM
			}		
		}
	}
	KYR_buy_support = {
		allowed = { always = no } #manually activated
				
		available = {
			FROM = { at_peace_or_same_enemies_as_FROM = yes }
		}
		visible = {
			FROM = { at_peace_or_same_enemies_as_FROM = yes }
		}
		cost = 20
		days_remove = 25
		fire_only_once = yes
		
		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision timeout KYR_buy_support"
			add_equipment_to_stockpile = {
				type = support_equipment_1
				amount = 500
				producer = FROM
			}		
		}
	}
	
}
TRK_Equipment_decisions = {
	TRK_buy_infantry = {
		icon = generic_prepare_civil_war
		allowed = { always = no }		
		visible = {
			hidden_trigger = {
				OR = {
					has_completed_focus = BUK_New_Equipment
					has_completed_focus = KHI_New_Equipment
					has_completed_focus = ALO_Prefer_Traditional_Methods
					has_completed_focus = ALO_Modernize_The_Army
				}
				NOT = { has_country_flag = TRK_equipment_refused_@FROM }
				FROM = { is_subject = no }
				ALO_equipment_decision_check = yes
			}
		}
		cancel_if_not_visible = yes
		fire_only_once = no
		days_remove = 20
		days_re_enable = 90
		
		ai_will_do = {
			factor = 0
			modifier = {
				# avoid division by zero
				check_variable = { num_target_equipment_in_armies@infantry_equipment > 0 }

				set_temp_variable = { TRK_infantry_equipment_ratio = num_equipment_in_armies@infantry_equipment }
				divide_temp_variable = { TRK_infantry_equipment_ratio = num_target_equipment_in_armies@infantry_equipment }

				set_temp_variable = { TRK_purchase_infantry_equipment_factor = 1 }
				subtract_from_temp_variable = { TRK_purchase_infantry_equipment_factor = TRK_infantry_equipment_ratio }
				multiply_temp_variable = { TRK_purchase_infantry_equipment_factor = 20 }

				add = TRK_purchase_infantry_equipment_factor
			}			
		}
		cost = 40

		cancel_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision cancel TRK_buy_infantry"
		}
		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision TRK_buy_infantry"
			if = {
				limit = {
					ROOT = { tag = ALO }
					FROM = { tag = RUS }
				}
				ALO_increase_russian_dependence = yes
			}
			if = {
				limit = {
					ROOT = {
						NOT = { tag = ALO }
					}
					FROM = { 
						OR = { 
							tag = GER
							tag = TUR
							tag = PER
							tag = INT
						}
					}
					NOT = { has_country_flag = @ROOT_equipment_@FROM }
				}
				FROM = {
					country_event = {
						id = turkestan.215
						days = 2
						random_days = 5
					}
				}
			}
		}
		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove TRK_buy_infantry"
			add_equipment_to_stockpile = {
				type = infantry_equipment_1
				amount = 2500
				producer = FROM
			}
		}
	}
	TRK_buy_support = { #purchase support equipment
		icon = GFX_decision_support_equipment
		allowed = { always = no }
		visible = {
			hidden_trigger = {
				OR = {
					has_completed_focus = BUK_New_Equipment
					has_completed_focus = KHI_New_Equipment
					has_completed_focus = ALO_Prefer_Traditional_Methods
					has_completed_focus = ALO_Modernize_The_Army
				}
				NOT = { has_country_flag = TRK_equipment_refused_@FROM }
				FROM = { is_subject = no }
				ALO_equipment_decision_check = yes
			}
		}
		cancel_if_not_visible = yes
		fire_only_once = no
		days_remove = 30
		days_re_enable = 90

		ai_will_do = {
			factor = 0
			modifier = {
				# avoid division by zero
				check_variable = { num_target_equipment_in_armies@support_equipment > 0 }

				set_temp_variable = { TRK_support_ratio = num_equipment_in_armies@support_equipment }
				divide_temp_variable = { TRK_support_ratio = num_target_equipment_in_armies@support_equipment }

				set_temp_variable = { TRK_purchase_support_factor = 1 }
				subtract_from_temp_variable = { TRK_purchase_support_factor = TRK_support_ratio }
				multiply_temp_variable = { TRK_purchase_support_factor = 20 }

				add = TRK_purchase_support_factor
			}
		}

		cost = 30

		cancel_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision cancel TRK_buy_support"
		}
		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision TRK_buy_support"
			if = {
				limit = {
					ROOT = { tag = ALO }
					FROM = { tag = RUS }
				}
				ALO_increase_russian_dependence = yes
			}
			if = {
				limit = {
					ROOT = {
						NOT = { tag = ALO }
					}
					FROM = { 
						OR = { 
							tag = GER
							tag = TUR
							tag = PER
							tag = INT
						}
					}
					NOT = { has_country_flag = @ROOT_equipment_@FROM }
				}
				FROM = {
					country_event = {
						id = turkestan.215
						days = 2
						random_days = 5
					}
				}
			}
		}
		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove TRK_buy_support"
			add_equipment_to_stockpile = {
				type = support_equipment_1
				amount = 400
				producer = FROM
			}
		}
	}
	TRK_buy_artillery = { #purchase artillery
		icon = GFX_decision_artillery
		allowed = { always = no }
		visible = {
			hidden_trigger = {
				OR = {
					has_completed_focus = BUK_New_Equipment
					has_completed_focus = KHI_Artillery_Integration
					has_completed_focus = KHI_20th_Century_Army
					has_completed_focus = ALO_Modernize_Artillery
					has_completed_focus = ALO_Against_Tank
				}
				NOT = { has_country_flag = TRK_equipment_refused_@FROM }
				FROM = { is_subject = no }
				ALO_equipment_decision_check = yes
			}
		}
		cancel_if_not_visible = yes
		fire_only_once = no
		days_remove = 30
		days_re_enable = 120

		ai_will_do = {
			factor = 0
			modifier = {
				# avoid division by zero
				check_variable = { num_target_equipment_in_armies@artillery_equipment > 0 }

				set_temp_variable = { TRK_artillery_ratio = num_equipment_in_armies@artillery_equipment }
				divide_temp_variable = { TRK_artillery_ratio = num_target_equipment_in_armies@artillery_equipment }

				set_temp_variable = { TRK_purchase_artillery_factor = 1 }
				subtract_from_temp_variable = { TRK_purchase_artillery_factor = TRK_artillery_ratio }
				multiply_temp_variable = { TRK_purchase_artillery_factor = 20 }

				add = TRK_purchase_artillery_factor
			}
		}

		cost = 60

		cancel_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision cancel TRK_buy_artillery"
		}
		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision TRK_buy_artillery"
			if = {
				limit = {
					ROOT = { tag = ALO }
					FROM = { tag = RUS }
				}
				ALO_increase_russian_dependence = yes
			}
			if = {
				limit = {
					ROOT = {
						NOT = { tag = ALO }
					}
					FROM = { 
						OR = { 
							tag = GER
							tag = TUR
							tag = PER
							tag = INT
						}
					}
					NOT = { has_country_flag = @ROOT_equipment_@FROM }
				}
				FROM = {
					country_event = {
						id = turkestan.215
						days = 2
						random_days = 5
					}
				}
			}
		}
		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove TRK_buy_artillery"
			add_equipment_to_stockpile = {
				type = artillery_equipment_1
				amount = 400
				producer = FROM
			}
		}
	}
	TRK_buy_at = { #purchase artillery
		icon = GFX_decision_artillery
		allowed = { always = no }
		visible = {
			hidden_trigger = {
				OR = {
					has_completed_focus = TRK_Tupchi_Expansion
					has_completed_focus = ALO_Against_Tank
				}
				NOT = { has_country_flag = TRK_equipment_refused_@FROM }
				FROM = { is_subject = no }
				ALO_equipment_decision_check = yes
			}
		}
		cancel_if_not_visible = yes
		fire_only_once = no
		days_remove = 30
		days_re_enable = 120

		ai_will_do = {
			factor = 0
			modifier = {
				# avoid division by zero
				check_variable = { num_target_equipment_in_armies@anti_tank_equipment > 0 }

				set_temp_variable = { TRK_anti_tank_ratio = num_equipment_in_armies@anti_tank_equipment }
				divide_temp_variable = { TRK_anti_tank_ratio = num_target_equipment_in_armies@anti_tank_equipment }

				set_temp_variable = { TRK_purchase_anti_tank_factor = 1 }
				subtract_from_temp_variable = { TRK_purchase_anti_tank_factor = TRK_artillery_ratio }
				multiply_temp_variable = { TRK_purchase_anti_tank_factor = 20 }

				add = TRK_purchase_artillery_factor
			}
		}

		cost = 60

		cancel_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision cancel TRK_buy_at"
		}
		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision TRK_buy_at"
			if = {
				limit = {
					ROOT = { tag = ALO }
					FROM = { tag = RUS }
				}
				ALO_increase_russian_dependence = yes
			}
			if = {
				limit = {
					ROOT = {
						NOT = { tag = ALO }
					}
					FROM = { 
						OR = { 
							tag = GER
							tag = TUR
							tag = PER
							tag = INT
						}
					}
					NOT = { has_country_flag = @ROOT_equipment_@FROM }
				}
				FROM = {
					country_event = {
						id = turkestan.215
						days = 2
						random_days = 5
					}
				}
			}
		}
		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove TRK_buy_at"
			add_equipment_to_stockpile = {
				type = artillery_equipment_1
				amount = 400
				producer = FROM
			}
		}
	}
	TRK_buy_aa = { #purchase artillery
		icon = GFX_decision_AA_small
		allowed = { always = no }
		visible = {
			hidden_trigger = {
				has_completed_focus = TRK_Tupchi_Expansion
				NOT = { has_country_flag = TRK_equipment_refused_@FROM }
				FROM = { is_subject = no }
			}
		}
		cancel_if_not_visible = yes
		fire_only_once = no
		days_remove = 30
		days_re_enable = 120

		ai_will_do = {
			factor = 0
			modifier = {
				# avoid division by zero
				check_variable = { num_target_equipment_in_armies@anti_air_equipment > 0 }

				set_temp_variable = { TRK_anti_air_ratio = num_equipment_in_armies@anti_air_equipment }
				divide_temp_variable = { TRK_anti_air_ratio = num_target_equipment_in_armies@anti_air_equipment }

				set_temp_variable = { TRK_purchase_anti_air_factor = 1 }
				subtract_from_temp_variable = { TRK_purchase_anti_air_factor = TRK_artillery_ratio }
				multiply_temp_variable = { TRK_purchase_anti_air_factor = 20 }

				add = TRK_purchase_artillery_factor
			}
		}

		cost = 60

		cancel_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision cancel TRK_buy_aa"
		}
		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision TRK_buy_aa"
			if = {
				limit = {
					ROOT = {
						NOT = { tag = ALO }
					}
					FROM = { 
						OR = { 
							tag = GER
							tag = TUR
							tag = PER
							tag = INT
						}
					}
					NOT = { has_country_flag = @ROOT_equipment_@FROM }
				}
				FROM = {
					country_event = {
						id = turkestan.215
						days = 2
						random_days = 5
					}
				}
			}
		}
		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove TRK_buy_aa"
			add_equipment_to_stockpile = {
				type = artillery_equipment_1
				amount = 400
				producer = FROM
			}
		}
	}
	TRK_buy_tank = { 
		icon = GFX_decision_tank
		allowed = { always = no }
		visible = {
			hidden_trigger = {
				has_completed_focus = KHI_20th_Century_Army
				NOT = { has_country_flag = TRK_equipment_refused_@FROM }
				FROM = { is_subject = no }
			}
		}
		cancel_if_not_visible = yes
		fire_only_once = no
		days_remove = 30
		days_re_enable = 120

		ai_will_do = {
			factor = 0
			modifier = {
				# avoid division by zero
				
				check_variable = { num_target_equipment_in_armies@light_tank_equipment_1 > 0 }
				
				set_temp_variable = { TRK_light_tank_ratio = num_equipment_in_armies@light_tank_equipment_1 }
				divide_temp_variable = { TRK_light_tank_ratio = num_target_equipment_in_armies@light_tank_equipment_1 }

				set_temp_variable = { TRK_purchase_light_tank_factor = 1 }
				subtract_from_temp_variable = { TRK_purchase_light_tank_factor = TRK_light_tank_ratio }
				multiply_temp_variable = { TRK_purchase_light_tank_factor = 20 }

				add = TRK_purchase_light_tank_factor
			}
		}

		cost = 80
		cancel_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision cancel TRK_buy_tank"
		}
		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision TRK_buy_tank"
			if = {
				limit = {
					FROM = { 
						tag = GER
					}
					NOT = { has_country_flag = @ROOT_equipment_@FROM }
				}
				FROM = {
					country_event = {
						id = turkestan.215
						days = 2
						random_days = 5
					}
				}
			}
		}
		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove TRK_buy_tank"
			if = {
				limit = {
					NOT = { has_dlc = "No Step Back" }
				}
				add_equipment_to_stockpile = {
					type = light_tank_equipment_1
					amount = 250
					producer = GER
				}
			}
			if = {
				limit = {
					has_dlc = "No Step Back"
				}
				add_equipment_to_stockpile = {
					type = light_tank_chassis_1
					amount = 250
					producer = GER
				}
			}
		}
	}
	TRK_buy_motorized = { #purchase German motorized
		icon = GFX_decision_generic_motorized
		allowed = { always = no }
		visible = {
			hidden_trigger = {
				OR = {
					has_completed_focus = BUK_New_Equipment
					has_completed_focus = KHI_New_Equipment
					has_completed_focus = ALO_Intoduce_Motorization
					has_completed_focus = ALO_expand_the_supply_corps
				}
				NOT = { has_country_flag = TRK_equipment_refused_@FROM }
				FROM = { is_subject = no }
				ALO_equipment_decision_check = yes
			}
		}
		cancel_if_not_visible = yes
		fire_only_once = no
		days_remove = 40
		days_re_enable = 150

		ai_will_do = {
			factor = 0
			modifier = {
				# avoid division by zero
				check_variable = { num_target_equipment_in_armies@motorized_equipment > 0 }

				set_temp_variable = { TRK_motorised_ratio = num_equipment_in_armies@motorized_equipment }
				divide_temp_variable = { TRK_motorised_ratio = num_target_equipment_in_armies@motorized_equipment }

				set_temp_variable = { TRK_purchase_motorised_factor = 1 }
				subtract_from_temp_variable = { TRK_purchase_motorised_factor = TRK_motorised_ratio }
				multiply_temp_variable = { TRK_purchase_motorised_factor = 20 }

				add = TRK_purchase_motorised_factor
			}
		}

		cost = 80

		cancel_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision cancel TRK_buy_motorized"
		}
		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision TRK_buy_motorized"
			if = {
				limit = {
					ROOT = { tag = ALO }
					FROM = { tag = RUS }
				}
				ALO_increase_russian_dependence = yes
			}
			if = {
				limit = {
					ROOT = {
						NOT = { tag = ALO }
					}
					FROM = { 
						OR = { 
							tag = GER
							tag = TUR
							tag = PER
							tag = INT
						}
					}
					NOT = { has_country_flag = @ROOT_equipment_@FROM }
				}
				FROM = {
					country_event = {
						id = turkestan.215
						days = 2
						random_days = 5
					}
				}
			}
		}
		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove TRK_buy_motorized"
			add_equipment_to_stockpile = {
				type = motorized_equipment_1
				amount = 100
				producer = FROM
			}
		}
	}
	TRK_buy_armored_cars = {
		icon = GFX_decision_give_cash
		allowed = { always = no }
		visible = {
			hidden_trigger = {
				has_completed_focus = ALO_Master_The_Machine
				NOT = { has_country_flag = TRK_equipment_refused_@FROM }
				FROM = { is_subject = no }
				ALO_equipment_decision_check = yes
			}
		}
		cancel_if_not_visible = yes
		fire_only_once = no
		days_remove = 20
		days_re_enable = 100

		ai_will_do = {
			factor = 0
			modifier = {
				# avoid division by zero
				check_variable = { num_target_equipment_in_armies@armored_car_equipment > 0 }

				set_temp_variable = { TRK_armoured_car_ratio = num_equipment_in_armies@armored_car_equipment }
				divide_temp_variable = { TRK_armoured_car_ratio = num_target_equipment_in_armies@armored_car_equipment }

				set_temp_variable = { TRK_purchase_armoured_car_factor = 1 }
				subtract_from_temp_variable = { TRK_purchase_armoured_car_factor = TRK_armoured_car_ratio }
				multiply_temp_variable = { TRK_purchase_armoured_car_factor = 20 }

				add = TRK_purchase_armoured_car_factor
			}
		}

		cost = 50

		cancel_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision cancel TRK_buy_armored_cars"
		}
		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision TRK_buy_armored_cars"
			if = {
				limit = {
					ROOT = { tag = ALO }
					FROM = { tag = RUS }
				}
				ALO_increase_russian_dependence = yes
			}
			if = {
				limit = {
					ROOT = {
						NOT = { tag = ALO }
					}
					FROM = { 
						OR = { 
							tag = GER
							tag = TUR
							tag = PER
							tag = INT
						}
					}
					NOT = { has_country_flag = @ROOT_equipment_@FROM }
				}
				FROM = {
					country_event = {
						id = turkestan.215
						days = 2
						random_days = 5
					}
				}
			}
		}
		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove TRK_buy_armored_cars"
			add_equipment_to_stockpile = {
				type = gw_armored_car_equipment
				amount = 100
				producer = FROM
			}
		}
	}

	TRK_buy_fighters = { #purchase german fighters
		icon = GFX_decision_generic_air
		allowed = { always = no }
		
		visible= {
			hidden_trigger = {
				OR = {
					has_completed_focus = TRK_Airforce
					has_completed_focus = KHI_Airforce
				}
				NOT = { has_country_flag = TRK_equipment_refused_@FROM }
				FROM = { is_subject = no }
				ALO_equipment_decision_check = yes
			}
		}
		cancel_if_not_visible = yes
		fire_only_once = no
		days_remove = 60
		days_re_enable = 180

		ai_will_do = {
			factor = 0
			modifier = {
				add = 80
				stockpile_ratio = {
					archetype = small_plane_airframe
					ratio < 0.75
				}
			}
		}

		cost = 60

		cancel_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision cancel TRK_buy_fighters"
		}
		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision TRK_buy_fighters"
			if = {
				limit = {
					ROOT = { tag = ALO }
					FROM = { tag = RUS }
				}
				ALO_increase_russian_dependence = yes
			}
			if = {
				limit = {
					ROOT = {
						NOT = { tag = ALO }
					}
					FROM = { 
						OR = { 
							tag = GER
							tag = TUR
							tag = PER
							tag = INT
						}
					}
					NOT = { has_country_flag = @ROOT_equipment_@FROM }
				}
				FROM = {
					country_event = {
						id = turkestan.215
						days = 2
						random_days = 5
					}
				}
			}
		}
		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove TRK_buy_fighters"
			add_equipment_to_stockpile = {
				type = small_plane_airframe
				amount = 150
				producer = FROM
			}
		}
	}
	TRK_buy_bombers = { #purchase german tactical bombers
		icon = GFX_decision_bomber
		allowed = { always = no }
		
		visible = {
			hidden_trigger = {
				OR = {
					has_completed_focus = TRK_Airforce
					has_completed_focus = KHI_Airforce
				}
				NOT = { has_country_flag = TRK_equipment_refused_@FROM }
				FROM = { is_subject = no }
				ALO_equipment_decision_check = yes
			}
		}
		cancel_if_not_visible = yes
		days_remove = 60
		days_re_enable = 180
		fire_only_once = no

		ai_will_do = {
			factor = 0
			modifier = {
				add = 80
				stockpile_ratio = {
					archetype = medium_plane_airframe
					ratio < 0.75
				}
			}
		}

		cost = 60 
		
		cancel_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision cancel TRK_buy_bombers"
		}
		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision TRK_buy_bombers"
			if = {
				limit = {
					ROOT = { tag = ALO }
					FROM = { tag = RUS }
				}
				ALO_increase_russian_dependence = yes
			}
			if = {
				limit = {
					ROOT = {
						NOT = { tag = ALO }
					}
					FROM = { 
						OR = { 
							tag = GER
							tag = TUR
							tag = PER
							tag = INT
						}
					}
					NOT = { has_country_flag = @ROOT_equipment_@FROM }
				}
				FROM = {
					country_event = {
						id = turkestan.215
						days = 2
						random_days = 5
					}
				}
			}
		}
		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove TRK_buy_bombers"
			add_equipment_to_stockpile = {
				type = medium_plane_airframe
				amount = 150
				producer = FROM
			}
		}
	}		
}
foreign_politics = {
	TRK_join_reichspakt = {
		name = GEO_join_reichspakt_decision
		icon = generic_agreement

		allowed = { 
			OR = {
				is_kokand_splinter_tag = yes
				tag = KHI
				tag = TRK
			}
		}

		available = {
			NOT = { has_global_flag = GER_withdrew_from_caucasus }
			if = {
				limit = {
					has_completed_focus = KHI_The_New_Seljuk_Empire
				}
				OR = {
					NOT = { country_exists = TUR }
					has_global_flag = AXIS_VICTORY
				}
				FROM = {
					NOT = { is_in_faction_with = TUR }
				}
			}			
			at_peace_or_same_enemies_as_FROM = yes
		}

		visible = {
			is_subject = no
			is_in_faction = no
		}

		fire_only_once = yes
		cost = 0

		targets = { GER }
		target_root_trigger = {
			OR = {
				has_completed_focus = KHI_Restore_The_Khwarazmian_Empire
				has_completed_focus = KHI_Foundation_Of_The_Turkmen_State
				has_completed_focus = KHI_The_New_Seljuk_Empire
			}
		}
		target_trigger = {
			FROM = {
				is_faction_leader = yes
				NOT = { has_war_with = ROOT }
			}
		}

		ai_will_do = {
			factor = 25
			modifier = {
				factor = 0
				FROM = {
					dont_start_major_faction_wars = yes
				}
			}
		}

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision TRK_join_reichspakt target: [From.GetName]"
			FROM = { country_event = sic.34 }
			set_country_flag = @ROOT_equipment_@FROM
		}
	}
	TRK_join_russia = {
		icon = generic_agreement

		allowed = { 
			OR = {
				is_kokand_splinter_tag = yes
				tag = KHI
				tag = TRK
			}
		}

		available = {
			at_peace_or_same_enemies_as_FROM = yes
			FROM = { both_socialist_or_both_not_socialist = yes }
		}

		visible = {
			is_subject = no
			is_in_faction = no
		}

		fire_only_once = yes
		cost = 0

		targets = { RUS }
		target_root_trigger = {
			OR = {
				has_completed_focus = KHI_Communist_Faction
				has_completed_focus = KHI_Young_Khiva_Faction
				has_completed_focus = KHI_Status_Quo
			}
		}
		target_trigger = {
			FROM = {
				OR = {
					is_faction_leader = yes
					is_in_faction_with = INT
				}
				NOT = { has_war_with = ROOT }
				NOT = { has_completed_focus = RUS_Expansionism }
			}
		}

		ai_will_do = {
			factor = 25
		}

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision TRK_join_russia target: [From.GetName]"
			FROM = { country_event = turkestan.20 }
		}
	}
	TRK_join_mongolia = {
		icon = generic_agreement

		allowed = { 
			OR = {
				is_kokand_splinter_tag = yes
				tag = KHI
				tag = TRK
			}
		}

		available = {
			at_peace_or_same_enemies_as_FROM = yes
		}

		visible = {
			is_subject = no
			is_in_faction = no
		}

		fire_only_once = yes
		cost = 0

		targets = { MON }
		target_root_trigger = {
			OR = {
				has_completed_focus = KHI_The_New_Seljuk_Empire
				has_completed_focus = KHI_Foundation_Of_The_Turkmen_State
			}
		}
		target_trigger = {
			FROM = {
				is_faction_leader = yes
				NOT = { has_war_with = ROOT }
				OR = {
					has_country_leader = {
						name = "Genghis Khan II"
						ruling_only = yes
					}
					has_country_leader = {
						name = "Regency Council"
						ruling_only = yes
					}
					has_country_leader = {
						name = "Rolf von Ungern Sternberg"
						ruling_only = yes
					}
					has_country_leader = {
						name = "Genghis Khan III"
						ruling_only = yes
					}
				}
			}
		}

		ai_will_do = {
			factor = 25
		}

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision TRK_join_mongolia target: [From.GetName]"
			FROM = { country_event = turkestan.20 }
		}
	}
	TRK_join_bharat = {
		icon = generic_agreement

		allowed = { 
			OR = {
				is_kokand_splinter_tag = yes
				tag = KHI
				tag = TRK
			}
		}

		available = {
			at_peace_or_same_enemies_as_FROM = yes
			has_socialist_government = yes
		}

		visible = {
			is_subject = no
			is_in_faction = no
			FROM = {
				is_faction_leader = yes
				NOT = { has_war_with = ROOT }
			}
		}

		fire_only_once = yes
		cost = 0

		targets = { BHC }
		target_root_trigger = {
			has_completed_focus = KHI_Communist_Faction
		}
		target_trigger = {
			FROM = {
				is_faction_leader = yes
				NOT = { has_war_with = ROOT }
			}
		}

		ai_will_do = {
			factor = 25
		}

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision TRK_join_bharat target: [From.GetName]"
			FROM = { country_event = turkestan.20 }
		}
	}	
}