scripted_gui = {


	belgrade_pact_affected_ethnicities_gui = {
		context_type = decision_category
		window_name = "belgrade_pact_affected_nations"
		
		visible = {
			tag = SER
		}
		
		ai_enabled = {
			always = no 
		}
		
		effects = {
			bpbutton_holdrevolt_click = {
				if = {
					limit = {
						THIS = {
							has_country_flag = BOTDE_revolt_hold
						}
					}
					clr_country_flag = BOTDE_revolt_hold
					else = {
						THIS = {
							set_country_flag = BOTDE_revolt_hold
						}
					}
				}
			}
			bpbutton_holdrevolt_off_click = {
				if = {
					limit = {
						THIS = {
							has_country_flag = BOTDE_revolt_hold
						}
					}
					clr_country_flag = BOTDE_revolt_hold
					else = {
						THIS = {
							set_country_flag = BOTDE_revolt_hold
						}
					}
				}
			}
			bpbutton_start_revolt_click = {
				set_global_flag = no_4_months
				THIS = {
					set_country_flag = BPTROLL_revolt_start
					save_global_event_target_as = BOTDE_backer_revolt_tag
				}
				set_global_flag = BPTROLL_revolt_incoming
				SER = {
					scoped_sound_effect = "BOTDE_incoming_backer_revolt"
					activate_mission = SER_revolt_mission
				}
				AUS = {
					scoped_sound_effect = "BOTDE_incoming_backer_revolt"
					activate_mission = AUS_SER_revolt_mission
				}
				CRO = {
					scoped_sound_effect = "BOTDE_incoming_backer_revolt"
					activate_mission = AUS_SER_revolt_mission
				}
			}
		}
		
		triggers = {
			bpbutton_holdrevolt_off_visible = {
				THIS = {
					has_country_flag = BOTDE_revolt_hold
				}
			}
			bpbutton_holdrevolt_visible = {
				THIS = {
					NOT = {
						has_country_flag = BOTDE_revolt_hold
					}
				}
			}
			bpbutton_holdrevolt_click_enabled = {
				NOT = {
					AUS = {
						has_country_flag = BOTDE_imminent_minority_revolt_temp
					}
				}
			}
			bpbutton_holdrevolt_off_click_enabled = {
				NOT = {
					AUS = {
						has_country_flag = BOTDE_imminent_minority_revolt_temp
					}
				}
			}
			belgrade_pact_occupied_tag_entry_visible = {
				NOT = {
					country_exists = THIS
				}
			}
			bpbutton_start_revolt_click_enabled = {
				THIS = {
					has_country_flag = BOTDE_ready_held_revolt
					NOT = {
						has_country_flag = BOTDE_imminent_minority_revolt_owner
						has_global_flag = BPTROLL_revolt_incoming
					}
					exists = no
				}
			}
		}
		
		dynamic_lists = {
			belgrade_pact_occupied_tags_info_grid_SER = {
				array = global.bp_occupied_tag_array_SER
				change_scope = yes
				entry_container = belgrade_pact_occupied_tag_entry
				
			}
		}
		properties = {
			bpflag = {
				image = "[THIS.GetFlag]"
			}
		}
	}
	
	belgrade_pact_affected_ethnicities_gui_ROM = {
		context_type = decision_category
		window_name = "belgrade_pact_affected_nations_ROM"
		
		visible = {
			tag = ROM
		}
		
		effects = {
			bpbutton_holdrevolt_ROM_click = {
				if = {
					limit = {
						THIS = {
							has_country_flag = BOTDE_revolt_hold
						}
					}
					clr_country_flag = BOTDE_revolt_hold
					else = {
						THIS = {
							set_country_flag = BOTDE_revolt_hold
						}
					}
				}
			}
			bpbutton_holdrevolt_off_ROM_click = {
				if = {
					limit = {
						THIS = {
							has_country_flag = BOTDE_revolt_hold
						}
					}
					clr_country_flag = BOTDE_revolt_hold
					else = {
						THIS = {
							set_country_flag = BOTDE_revolt_hold
						}
					}
				}
			}
			bpbutton_start_revolt_ROM_click = {
				set_global_flag = no_4_months
				THIS = {
					set_country_flag = BPTROLL_revolt_start
					save_global_event_target_as = BOTDE_backer_revolt_tag
				}
				set_global_flag = BPTROLL_revolt_incoming
				ROM = {
					scoped_sound_effect = "BOTDE_incoming_backer_revolt"
					activate_mission = ROM_revolt_mission
				}
				AUS = {
					scoped_sound_effect = "BOTDE_incoming_backer_revolt"
					activate_mission = AUS_ROM_revolt_mission
				}
				if = {
					limit = {
						THIS = {
							tag = BUK
						}
					}
					GAL = {
						scoped_sound_effect = "BOTDE_incoming_backer_revolt"
						activate_mission = AUS_ROM_revolt_mission
					}
					else = {
						HUN = {
							scoped_sound_effect = "BOTDE_incoming_backer_revolt"
							activate_mission = AUS_ROM_revolt_mission
						}
					}
				}
				if = {
					limit = {
						ROM = {
							is_ai = yes
						}
					}
					TRS = {
						THIS_add_ten_collapse = yes
						set_variable_to_random = {
							var = THIS.extra_divs
							max = 3
							integer = yes
						}
					}
					BAN = {
						THIS_add_ten_collapse = yes
						set_variable_to_random = {
							var = THIS.extra_divs
							max = 3
							integer = yes
						}
					}
					BUK = {
						THIS_add_ten_collapse = yes
						set_variable_to_random = {
							var = THIS.extra_divs
							max = 3
							integer = yes
						}
					}
				}
			}
		}
		
		triggers = {
			bpbutton_holdrevolt_off_ROM_visible = {
				THIS = {
					has_country_flag = BOTDE_revolt_hold
				}
			}
			bpbutton_holdrevolt_ROM_visible = {
				THIS = {
					NOT = {
						has_country_flag = BOTDE_revolt_hold
					}
				}
			}
			bpbutton_holdrevolt_ROM_click_enabled = {
				NOT = {
					AUS = {
						has_country_flag = BOTDE_imminent_minority_revolt_temp
					}
				}
			}
			bpbutton_holdrevolt_off_ROM_click_enabled = {
				NOT = {
					AUS = {
						has_country_flag = BOTDE_imminent_minority_revolt_temp
					}
				}
			}
			belgrade_pact_occupied_tag_entry_ROM_visible = {
				NOT = {
					country_exists = THIS
				}
			}
			bpbutton_start_revolt_ROM_click_enabled = {
				THIS = {
					has_country_flag = BOTDE_ready_held_revolt
					NOT = {
						has_country_flag = BOTDE_imminent_minority_revolt_owner
						has_global_flag = BPTROLL_revolt_incoming
					}
					exists = no
				}
			}
		}
		
		dynamic_lists = {
			belgrade_pact_occupied_tags_info_grid_ROM = {
				array = global.bp_occupied_tag_array_ROM
				change_scope = yes
				entry_container = belgrade_pact_occupied_tag_entry_ROM
				
			}
		}
		properties = {
			bpflag_ROM = {
				image = "[THIS.GetFlag]"
			}
		}
	}
	
}
