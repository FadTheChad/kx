on_actions = {
	on_capitulation_immediate = {
		effect = {
			if = {
				limit = {
					tag = RVA
				}
				if = {
					limit = { is_in_faction = yes }
					faction_leader = { dismantle_faction = yes }
				}
			}
		}
	}
	
	#ROOT is winner #FROM is loser
	on_peaceconference_ended = {
		effect = {
			if = {
				limit = {
					ROOT = { tag = TRM }
					FROM = { tag = SIB }
					has_global_flag = RCW_begun
					NOT = { has_global_flag = RCW_over }
				}
				ROOT = {
					every_state = {
						limit = {
							is_core_of = FROM
						}
						add_core_of = ROOT
					}
				}
				every_other_country = {
					limit = {
						OR = {
							tag = RUS
							tag = RRF
							tag = RVA
						}
						exists = yes
					}
					country_event = {
						id = rcw.34
						days = 2
					}
				}
			}
		}
	}
	on_annex = {
		effect = {
			if = {
				limit = {
					ROOT = {
						tag = TRM
						has_country_flag = SOV_restored_in_transamur
					}
					FROM = { tag = RUS }
				}
				TRM = {
					add_timed_idea = {
						idea = TRM_Aftermath_Sib_War
						days = 365
					}
					add_ideas = {
						SOV_nationalist_resistance
						SOV_monarchist_resistance
						SOV_democrat_resistance
						SOV_socialist_resistance
					}
					set_country_flag = SOV_must_deal_with_opposition
					every_owned_state = {
						limit = {
							is_core_of = RUS
							NOT = { is_core_of = TRM }
							is_claimed_by = TRM
						}
						remove_claim_by = TRM
						add_core_of = TRM
					}
					if = {
						limit = {
							has_cosmetic_tag = TRM_NRA
						}
						drop_cosmetic_tag = yes
					}
				}
			}
		}
	}
	#ROOT is new controller #FROM is old controller #FROM.FROM is state ID
	on_state_control_changed = {
		effect = {
			### RUS/SOV control array
			if = {
				limit = {
					tag = RUS
					NOT = { is_in_array = { ROOT.enemy_controlled_states = FROM.FROM } }
					FROM.FROM = {
						owner = { has_war_with = ROOT }
						OR = {
							is_on_continent = europe
							is_on_continent = middle_east
						}
					}
				}
				set_country_flag = has_enemy_control_array
				add_to_array = { ROOT.enemy_controlled_states = FROM.FROM }
			}
			if = {
				limit = {
					tag = RUS
					ROOT = { controls_province = 3529 }
					FROM.FROM = {
						state = 217
					}
				}
				if = {
					limit = { country_exists = ALO }
					ALO = { country_event = alash.391 }
				}
			}
		}				
	}
}
