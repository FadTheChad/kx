TRK_setup_initial_vars = {
	set_variable = { TRK_erk_civ_war_var = 21 }
	set_variable = { TRK_shokai_civ_war_var = 25 }
	set_variable = { TRK_ittifoq_civ_war_var = 24 }
	set_variable = { TRK_ferghana_civ_war_var = 17 }
	set_variable = { TRK_mujahideen_civ_war_var = 13 }
	set_variable = { turkestan_coalition_stability = 2 }

	set_power_balance = {
		id = TRK_dual_power_bop
		left_side = TRK_shokai_side
		right_side = TRK_madamin_side
		set_value = 0.15
	}
}
TRK_recalc_pop_before_election = {
	# ERK
	set_variable = { TKR_erk_pop = party_popularity@syndicalist }
	add_to_variable = { TKR_erk_pop = party_popularity@totalist }
	add_to_variable = { TKR_erk_pop = party_popularity@radical_socialist }
	if = {
		limit = { has_country_flag = TRK_socdem_erk }
		add_to_variable = { TKR_erk_pop = party_popularity@social_democrat }
	}
	
	# Milliy Ittihod #
	if = {
		limit = {
			NOT = { has_country_flag = TRK_yosh_turkiston_soclib }
		}
		set_variable = { TRK_milliy_pop = party_popularity@social_liberal }
		if = {
			limit = { NOT = { has_country_flag = TRK_socdem_erk } }
			add_to_variable = { TRK_milliy_pop = party_popularity@social_democrat }
		}
		if = {
			limit = { NOT = { has_country_flag = TRK_yosh_turkiston_marlib } }
			add_to_variable = { TRK_milliy_pop = party_popularity@market_liberal }
		}
	}
	else = {
		set_variable = { TRK_milliy_pop = party_popularity@market_liberal }
		if = {
			limit = { NOT = { has_country_flag = TRK_socdem_erk } }
			add_to_variable = { TRK_milliy_pop = party_popularity@social_democrat }
		}
	}
	
	# Yosh Turkiston #
	if = {
		limit = { has_country_flag = TRK_yosh_turkiston_soclib }
		set_variable = { TRK_yosh_pop = party_popularity@social_liberal }
	}
	else_if = {
		limit = { has_country_flag = TRK_yosh_turkiston_marlib }
		set_variable = { TRK_yosh_pop = party_popularity@market_liberal }
	}
	else_if = {
		limit = { has_country_flag = TRK_yosh_turkiston_authdem }
		set_variable = { TRK_yosh_pop = party_popularity@authoritarian_democrat }
	}
	
	# Ittifoqi Muslimin #
	set_variable = { TRK_ittifoqi_pop = party_popularity@social_conservative }
	if = {
		limit = { 
			NOT = { has_country_flag = TRK_yosh_turkiston_authdem }
		}
		add_to_variable = { TRK_ittifoqi_pop = party_popularity@authoritarian_democrat }
	}
	if = {
		limit = { has_country_flag = TRK_ittifoqi_pataut }
		add_to_variable = { TRK_ittifoqi_pop = party_popularity@paternal_autocrat }
	}
	
}
TRK_bop_ruling_large_effect = {
	if = {
		limit = { has_socialist_government = yes }
		TRK_erk_large_effect = yes
	}
	else_if = {
		limit = { TRK_has_jadidist_government = yes }
		TRK_shokai_large_effect = yes
	}
	else_if = {
		limit = { 
			OR = {
				TRK_ulema_in_power = yes 
				TRK_katta_ergash_in_power = yes 
			}
		}
		TRK_ulema_large_effect = yes
	}
	else_if = {
		limit = { TRK_madamin_bek_in_power = yes }
		TRK_ferghana_large_effect = yes
	}
	else_if = {
		limit = { TRK_kurshirmat_in_power = yes }
		TRK_mujahideen_large_effect = yes
	}
}
TRK_bop_ruling_medium_effect = {
	if = {
		limit = { has_socialist_government = yes }
		TRK_erk_medium_effect = yes
	}
	else_if = {
		limit = { TRK_has_jadidist_government = yes }
		TRK_shokai_medium_effect = yes
	}
	else_if = {
		limit = { 
			OR = {
				TRK_ulema_in_power = yes 
				TRK_katta_ergash_in_power = yes 
			}
		}
		TRK_ulema_medium_effect = yes
	}
	else_if = {
		limit = { TRK_madamin_bek_in_power = yes }
		TRK_ferghana_medium_effect = yes
	}
	else_if = {
		limit = { TRK_kurshirmat_in_power = yes }
		TRK_mujahideen_medium_effect = yes
	}
}
TRK_bop_ruling_small_effect = {
	if = {
		limit = { TRK_erk_in_power = yes }
		TRK_erk_small_effect = yes
	}
	else_if = {
		limit = { TRK_has_jadidist_government = yes }
		TRK_shokai_small_effect = yes
	}
	else_if = {
		limit = { 
			OR = {
				TRK_ulema_in_power = yes 
				TRK_katta_ergash_in_power = yes 
			}
		}
		TRK_ulema_small_effect = yes
	}
	else_if = {
		limit = { TRK_madamin_bek_in_power = yes }
		TRK_ferghana_small_effect = yes
	}
	else_if = {
		limit = { TRK_kurshirmat_in_power = yes }
		TRK_mujahideen_small_effect = yes
	}
}
TRK_bop_ruling_medium_decrease_effect = {
	if = {
		limit = { has_socialist_government = yes }
		TRK_erk_medium_decrease_effect = yes
	}
	else_if = {
		limit = { TRK_has_jadidist_government = yes }
		TRK_shokai_medium_decrease_effect = yes
	}
	else_if = {
		limit = { 
			OR = {
				TRK_ulema_in_power = yes 
				TRK_katta_ergash_in_power = yes 
			}
		}
		TRK_ulema_medium_decrease_effect = yes
	}
	else_if = {
		limit = { TRK_madamin_bek_in_power = yes }
		TRK_ferghana_medium_decrease_effect = yes
	}
	else_if = {
		limit = { TRK_kurshirmat_in_power = yes }
		TRK_mujahideen_medium_decrease_effect = yes
	}
}
TRK_bop_ruling_small_decrease_effect = {
	if = {
		limit = { has_socialist_government = yes }
		TRK_erk_small_decrease_effect = yes
	}
	else_if = {
		limit = { TRK_has_jadidist_government = yes }
		TRK_shokai_small_decrease_effect = yes
	}
	else_if = {
		limit = { 
			OR = {
				TRK_ulema_in_power = yes 
				TRK_katta_ergash_in_power = yes 
			}
		}
		TRK_ulema_small_decrease_effect = yes
	}
	else_if = {
		limit = { TRK_madamin_bek_in_power = yes }
		TRK_ferghana_small_decrease_effect = yes
	}
	else_if = {
		limit = { TRK_kurshirmat_in_power = yes }
		TRK_mujahideen_small_decrease_effect = yes
	}
}
TRK_bop_ruling_mega_decrease_effect = {
	if = {
		limit = { has_socialist_government = yes }
		TRK_erk_mega_decrease_effect = yes
	}
	else_if = {
		limit = { TRK_has_jadidist_government = yes }
		TRK_shokai_mega_decrease_effect = yes
	}
	else_if = {
		limit = { 
			OR = {
				TRK_ulema_in_power = yes 
				TRK_katta_ergash_in_power = yes 
			}
		}
		TRK_ulema_mega_decrease_effect = yes
	}
	else_if = {
		limit = { TRK_madamin_bek_in_power = yes }
		TRK_ferghana_mega_decrease_effect = yes
	}
	else_if = {
		limit = { TRK_kurshirmat_in_power = yes }
		TRK_mujahideen_mega_decrease_effect = yes
	}
}
TRK_shokai_authoritarian = {
	set_country_flag = TRK_shokai_authoritarian
	custom_effect_tooltip = TRK_shokai_authoritarian_tt
	hidden_effect = {
		set_temp_variable = { TRK_new_soclib = TRK.party_popularity_100@social_liberal }
		divide_temp_variable = { TRK_new_soclib = 2 }

		set_temp_variable = { TRK_new_authdem = TRK.party_popularity_100@authoritarian_democrat }
		add_to_temp_variable = { TRK_new_authdem = TRK_new_soclib }

		set_temp_variable = { sum = 100 }
		subtract_from_temp_variable = { sum = party_popularity_100@totalist }
		subtract_from_temp_variable = { sum = party_popularity_100@syndicalist }
		subtract_from_temp_variable = { sum = party_popularity_100@radical_socialist }
		subtract_from_temp_variable = { sum = party_popularity_100@social_democrat }
		subtract_from_temp_variable = { sum = TRK_new_soclib }
		subtract_from_temp_variable = { sum = party_popularity_100@market_liberal }
		subtract_from_temp_variable = { sum = party_popularity_100@social_conservative }
		subtract_from_temp_variable = { sum = TRK_new_authdem }
		subtract_from_temp_variable = { sum = party_popularity_100@paternal_autocrat }
		subtract_from_temp_variable = { sum = party_popularity_100@national_populist }

		add_to_temp_variable = { TRK_new_authdem = sum } #avoid rounding errors

		set_popularities = {
			totalist = party_popularity_100@totalist
			syndicalist = party_popularity_100@syndicalist
			radical_socialist = party_popularity_100@radical_socialist
			social_democrat = party_popularity_100@social_democrat
			social_liberal = TRK_new_soclib
			market_liberal = party_popularity_100@market_liberal
			social_conservative = party_popularity_100@social_conservative
			authoritarian_democrat = TRK_new_authdem
			paternal_autocrat = party_popularity_100@paternal_autocrat
			national_populist = party_popularity_100@national_populist
		}
				
		create_country_leader = {
			name = "Munawwar Qari Abdurrashidkhan"
			desc = "POLITICS_MUNAWWAR_ANDURRASHIDKHAN_DESC"
			picture = "gfx/leaders/TRK/Portrait_TRK_Munawwar_Qari_Abdurrashidkhan.png"
			expire = "1.1.1"
			ideology = jadidism_subtype
		}
		
		create_country_leader = {
			name = "Mustafa Shokay"
			desc = "POLITICS_MUSTAFA_SHOKAY_DESC"
			picture = "gfx/leaders/TRK/Portrait_TRK_Mustafa_Shokay.png"
			expire = "1.1.1"
			ideology = authoritarian_liberalism_subtype
		}
		set_party_name = {
			ideology = authoritarian_democrat
			name = TRK_social_liberal_party
			long_name = TRK_social_liberal_party_long
		}
	}
}
TRK_shokai_remove_authoritarian = {
	clr_country_flag = TRK_shokai_authoritarian
	clr_country_flag = TRK_yosh_turkiston_authdem
	hidden_effect = {
		set_temp_variable = { TRK_new_authdem = TRK.party_popularity_100@authoritarian_democrat }
		divide_temp_variable = { TRK_new_authdem = 2 }

		set_temp_variable = { TRK_new_marlib = TRK.party_popularity_100@market_liberal }
		add_to_temp_variable = { TRK_new_marlib = TRK_new_authdem }

		set_temp_variable = { sum = 100 }
		subtract_from_temp_variable = { sum = party_popularity_100@totalist }
		subtract_from_temp_variable = { sum = party_popularity_100@syndicalist }
		subtract_from_temp_variable = { sum = party_popularity_100@radical_socialist }
		subtract_from_temp_variable = { sum = party_popularity_100@social_democrat }
		subtract_from_temp_variable = { sum = party_popularity_100@social_liberal }
		subtract_from_temp_variable = { sum = TRK_new_marlib }
		subtract_from_temp_variable = { sum = party_popularity_100@social_conservative }
		subtract_from_temp_variable = { sum = TRK_new_authdem }
		subtract_from_temp_variable = { sum = party_popularity_100@paternal_autocrat }
		subtract_from_temp_variable = { sum = party_popularity_100@national_populist }

		add_to_temp_variable = { TRK_new_marlib = sum } #avoid rounding errors

		set_popularities = {
			totalist = party_popularity_100@totalist
			syndicalist = party_popularity_100@syndicalist
			radical_socialist = party_popularity_100@radical_socialist
			social_democrat = party_popularity_100@social_democrat
			social_liberal = party_popularity_100@social_liberal
			market_liberal = TRK_new_marlib
			social_conservative = party_popularity_100@social_conservative
			authoritarian_democrat = TRK_new_authdem
			paternal_autocrat = party_popularity_100@paternal_autocrat
			national_populist = party_popularity_100@national_populist
		}		
		create_country_leader = {
			name = "Mustafa Shokay"
			desc = "POLITICS_MUSTAFA_SHOKAY_DESC"
			picture = "gfx/leaders/TRK/Portrait_TRK_Mustafa_Shokay.png"
			expire = "1.1.1"
			ideology = marlib_jadidism_subtype
			traits = { TRK_tranquil_reformer }
		}
		create_country_leader = {
			name = "Ergash Bey"
			desc = "POLITICS_KATTA_ERGASH_DESC"
			picture = "gfx/leaders/TRK/Portrait_TRK_Katta_Ergash.png"
			expire = "1.1.1"
			ideology = authdem_warlordism_subtype  
		}
		set_party_name = {
			ideology = authoritarian_democrat
			name = TRK_authoritarian_democrat_party
			long_name = TRK_authoritarian_democrat_party_long
		}
	}
}
TRK_bop_shokay_changes_sides = {
	set_power_balance = {
		id = TRK_dual_power_bop
		left_side = TRK_erk_side
		right_side = TRK_shokai_right_side
	}
	hidden_effect = {
		if = {
			limit = { 
				power_balance_value = { id = TRK_dual_power_bop value < 0 }
				power_balance_value = { id = TRK_dual_power_bop value > -0.1 }
			}
			add_power_balance_value = {
				id = TRK_dual_power_bop
				value = 0.1
			}
		}
		else_if = {
			limit = { 
				power_balance_value = { id = TRK_dual_power_bop value < -0.1 }
				power_balance_value = { id = TRK_dual_power_bop value > -0.35 }
			}
			add_power_balance_value = {
				id = TRK_dual_power_bop
				value = 0.55
			}
		}
		else_if = {
			limit = { 
				power_balance_value = { id = TRK_dual_power_bop value < -0.35 }
			}
			add_power_balance_value = {
				id = TRK_dual_power_bop
				value = 1.5
			}
		}
		else_if = {
			limit = { 
				power_balance_value = { id = TRK_dual_power_bop value > 0 }
				power_balance_value = { id = TRK_dual_power_bop value < 0.1 }
			}
			add_power_balance_value = {
				id = TRK_dual_power_bop
				value = -0.1
			}
		}
		else_if = {
			limit = { 
				power_balance_value = { id = TRK_dual_power_bop value > 0.1 }
				power_balance_value = { id = TRK_dual_power_bop value < 0.35 }
			}
			add_power_balance_value = {
				id = TRK_dual_power_bop
				value = -0.25
			}
		}
		else_if = {
			limit = { 
				power_balance_value = { id = TRK_dual_power_bop value > 0.35 }
			}
			add_power_balance_value = {
				id = TRK_dual_power_bop
				value = -0.5
			}
		}		
	}
}
		
# ERK
TRK_erk_bop_small_decrease_effect = {
	if = {
		limit = { has_any_power_balance = yes }
		if = {
			limit = { is_power_balance_side_active = { id = TRK_dual_power_bop side = TRK_erk_side } }
			add_power_balance_value = {
				id = TRK_dual_power_bop
				value = 0.02
			}
		}
	}
}
TRK_erk_pop_small_decrease_effect = {
	add_popularity = {
		ideology = syndicalist
		popularity = -0.01
	}
}
TRK_erk_small_decrease_effect = {
	TRK_erk_bop_small_decrease_effect = yes
	TRK_erk_pop_small_decrease_effect = yes	
}
TRK_erk_bop_medium_decrease_effect = {
	if = {
		limit = { has_any_power_balance = yes }
		if = {
			limit = { is_power_balance_side_active = { id = TRK_dual_power_bop side = TRK_erk_side } }
			add_power_balance_value = {
				id = TRK_dual_power_bop
				value = 0.06
			}
		}
	}
}
TRK_erk_pop_medium_decrease_effect = {
	add_popularity = {
		ideology = syndicalist
		popularity = -0.03
	}
}
TRK_erk_medium_decrease_effect = {
	TRK_erk_bop_medium_decrease_effect = yes
	TRK_erk_pop_medium_decrease_effect = yes	
}
TRK_erk_bop_large_decrease_effect = {
	if = {
		limit = { has_any_power_balance = yes }
		if = {
			limit = { is_power_balance_side_active = { id = TRK_dual_power_bop side = TRK_erk_side } }
			add_power_balance_value = {
				id = TRK_dual_power_bop
				value = 0.10
			}
		}
	}
}
TRK_erk_pop_large_decrease_effect = {
	add_popularity = {
		ideology = syndicalist
		popularity = -0.05
	}
}
TRK_erk_large_decrease_effect = {
	TRK_erk_bop_large_decrease_effect = yes
	TRK_erk_pop_large_decrease_effect = yes	
}
TRK_erk_bop_mega_decrease_effect = {
	if = {
		limit = { has_any_power_balance = yes }
		if = {
			limit = { is_power_balance_side_active = { id = TRK_dual_power_bop side = TRK_erk_side } }
			add_power_balance_value = {
				id = TRK_dual_power_bop
				value = 0.20
			}
		}
	}
}
TRK_erk_pop_mega_decrease_effect = {
	add_popularity = {
		ideology = syndicalist
		popularity = -0.10
	}
}
TRK_erk_mega_decrease_effect = {
	TRK_erk_bop_mega_decrease_effect = yes
	TRK_erk_pop_mega_decrease_effect = yes	
}
# Shokai
TRK_shokai_bop_small_decrease_effect = {
	if = {
		limit = { has_any_power_balance = yes }
		if = {
			limit = { 
				OR = {
					is_power_balance_side_active = { id = TRK_dual_power_bop side = TRK_shokai_side }
					is_power_balance_side_active = { id = TRK_dual_power_bop side = TRK_shokai_right_side }
				} 
			}
			if = {
				limit = { 
					is_power_balance_side_active = {
						id = TRK_dual_power_bop
						side = TRK_shokai_right_side
					}
				}
				add_power_balance_value = {
					id = TRK_dual_power_bop
					value = -0.02
				}
			}
			else = {
				add_power_balance_value = {
					id = TRK_dual_power_bop
					value = 0.02
				}
			}
		}
	}
}
TRK_shokai_pop_small_decrease_effect = {
	if = {
		limit = { 
			TRK_shokai_in_power = yes 
			has_country_flag = TRK_shokai_authoritarian
		}
		add_popularity = {
			ideology = authoritarian_democrat
			popularity = -0.01
		}
	}
	else = {
		add_popularity = {
			ideology = social_liberal
			popularity = -0.01
		}
	}
}
TRK_shokai_small_decrease_effect = {
	TRK_shokai_bop_small_decrease_effect = yes
	TRK_shokai_pop_small_decrease_effect = yes	
}
TRK_shokai_bop_medium_decrease_effect = {
	if = {
		limit = { has_any_power_balance = yes }
		if = {
			limit = { 
				OR = {
					is_power_balance_side_active = { id = TRK_dual_power_bop side = TRK_shokai_side }
					is_power_balance_side_active = { id = TRK_dual_power_bop side = TRK_shokai_right_side }
				} 
			}
			if = {
				limit = { 
					is_power_balance_side_active = {
						id = TRK_dual_power_bop
						side = TRK_shokai_right_side
					}
				}
				add_power_balance_value = {
					id = TRK_dual_power_bop
					value = -0.06
				}
			}
			else = {
				add_power_balance_value = {
					id = TRK_dual_power_bop
					value = 0.06
				}
			}
		}
	}
}
TRK_shokai_pop_medium_decrease_effect = {
	if = {
		limit = { 
			TRK_shokai_in_power = yes 
			has_country_flag = TRK_shokai_authoritarian
		}
		add_popularity = {
			ideology = authoritarian_democrat
			popularity = -0.03
		}
	}
	else = {
		add_popularity = {
			ideology = social_liberal
			popularity = -0.03
		}
	}
}
TRK_shokai_medium_decrease_effect = {
	TRK_shokai_bop_medium_decrease_effect = yes
	TRK_shokai_pop_medium_decrease_effect = yes	
}
TRK_shokai_bop_large_decrease_effect = {
	if = {
		limit = { has_any_power_balance = yes }
		if = {
			limit = { 
				OR = {
					is_power_balance_side_active = { id = TRK_dual_power_bop side = TRK_shokai_side }
					is_power_balance_side_active = { id = TRK_dual_power_bop side = TRK_shokai_right_side }
				} 
			}
			if = {
				limit = { 
					is_power_balance_side_active = {
						id = TRK_dual_power_bop
						side = TRK_shokai_right_side
					}
				}
				add_power_balance_value = {
					id = TRK_dual_power_bop
					value = -0.10
				}
			}
			else = {
				add_power_balance_value = {
					id = TRK_dual_power_bop
					value = 0.10
				}
			}
		}
	}
}
TRK_shokai_pop_large_decrease_effect = {
	if = {
		limit = { 
			TRK_shokai_in_power = yes 
			has_country_flag = TRK_shokai_authoritarian
		}
		add_popularity = {
			ideology = authoritarian_democrat
			popularity = -0.05
		}
	}
	else = {
		add_popularity = {
			ideology = social_liberal
			popularity = -0.05
		}
	}
}
TRK_shokai_large_decrease_effect = {
	TRK_shokai_bop_large_decrease_effect = yes
	TRK_shokai_pop_large_decrease_effect = yes	
}
TRK_shokai_bop_mega_decrease_effect = {
	if = {
		limit = { has_any_power_balance = yes }
		if = {
			limit = { 
				OR = {
					is_power_balance_side_active = { id = TRK_dual_power_bop side = TRK_shokai_side }
					is_power_balance_side_active = { id = TRK_dual_power_bop side = TRK_shokai_right_side }
				} 
			}
			if = {
				limit = { 
					is_power_balance_side_active = {
						id = TRK_dual_power_bop
						side = TRK_shokai_right_side
					}
				}
				add_power_balance_value = {
					id = TRK_dual_power_bop
					value = -0.20
				}
			}
			else = {
				add_power_balance_value = {
					id = TRK_dual_power_bop
					value = 0.20
				}
			}
		}
	}
}
TRK_shokai_pop_mega_decrease_effect = {
	if = {
		limit = { 
			TRK_shokai_in_power = yes 
			has_country_flag = TRK_shokai_authoritarian
		}
		add_popularity = {
			ideology = authoritarian_democrat
			popularity = -0.10
		}
	}
	else = {
		add_popularity = {
			ideology = social_liberal
			popularity = -0.10
		}
	}
}
TRK_shokai_mega_decrease_effect = {
	TRK_shokai_bop_mega_decrease_effect = yes
	TRK_shokai_pop_mega_decrease_effect = yes	
}
# Ferghana
TRK_ferghana_bop_small_decrease_effect = {
	if = {
		limit = { has_any_power_balance = yes }
		if = {
			limit = { 
				is_power_balance_side_active = { id = TRK_dual_power_bop side = TRK_madamin_side }
			}
			add_power_balance_value = {
				id = TRK_dual_power_bop
				value = -0.02
			}
		}
	}
}
TRK_ferghana_pop_small_decrease_effect = {
	add_popularity = {
		ideology = paternal_autocrat
		popularity = -0.01
	}
}
TRK_ferghana_small_decrease_effect = {
	TRK_ferghana_bop_small_decrease_effect = yes
	TRK_ferghana_pop_small_decrease_effect = yes	
}
TRK_ferghana_bop_medium_decrease_effect = {
	if = {
		limit = { has_any_power_balance = yes }
		if = {
			limit = { 
				is_power_balance_side_active = { id = TRK_dual_power_bop side = TRK_madamin_side }
			}
			add_power_balance_value = {
				id = TRK_dual_power_bop
				value = -0.06
			}
		}
	}
}
TRK_ferghana_pop_medium_decrease_effect = {
	add_popularity = {
		ideology = paternal_autocrat
		popularity = -0.03
	}
}
TRK_ferghana_medium_decrease_effect = {
	TRK_ferghana_bop_medium_decrease_effect = yes
	TRK_ferghana_pop_medium_decrease_effect = yes	
}
TRK_ferghana_bop_large_decrease_effect = {
	if = {
		limit = { has_any_power_balance = yes }
		if = {
			limit = { 
				is_power_balance_side_active = { id = TRK_dual_power_bop side = TRK_madamin_side }
			}
			add_power_balance_value = {
				id = TRK_dual_power_bop
				value = -0.10
			}
		}
	}
}
TRK_ferghana_pop_large_decrease_effect = {
	add_popularity = {
		ideology = paternal_autocrat
		popularity = -0.05
	}
}
TRK_ferghana_large_decrease_effect = {
	TRK_ferghana_bop_large_decrease_effect = yes
	TRK_ferghana_pop_large_decrease_effect = yes	
}
TRK_ferghana_bop_mega_decrease_effect = {
	if = {
		limit = { has_any_power_balance = yes }
		if = {
			limit = { 
				is_power_balance_side_active = { id = TRK_dual_power_bop side = TRK_madamin_side }
			}
			add_power_balance_value = {
				id = TRK_dual_power_bop
				value = -0.20
			}
		}
	}
}
TRK_ferghana_pop_mega_decrease_effect = {
	add_popularity = {
		ideology = paternal_autocrat
		popularity = -0.10
	}
}
TRK_ferghana_mega_decrease_effect = {
	TRK_ferghana_bop_mega_decrease_effect = yes
	TRK_ferghana_pop_mega_decrease_effect = yes	
}
# Ulema
TRK_ulema_bop_small_decrease_effect = {
	if = {
		limit = { has_any_power_balance = yes }
		if = {
			limit = { 
				OR = {
					is_power_balance_side_active = { id = TRK_dual_power_bop side = TRK_ulema_side }
					is_power_balance_side_active = { id = TRK_dual_power_bop side = TRK_ulema_left_side }
				} 
			}
			if = {
				limit = { 
					is_power_balance_side_active = {
						id = TRK_dual_power_bop
						side = TRK_ulema_left_side
					}
				}
				add_power_balance_value = {
					id = TRK_dual_power_bop
					value = 0.02
				}
			}
			else = {
				add_power_balance_value = {
					id = TRK_dual_power_bop
					value = -0.02
				}
			}
		}
	}
}
TRK_ulema_pop_small_decrease_effect = {
	if = {
		limit = { 
			TRK_katta_ergash_in_power = yes 
		}
		add_popularity = {
			ideology = authoritarian_democrat
			popularity = -0.01
		}
	}
	else = {
		add_popularity = {
			ideology = social_conservative
			popularity = -0.01
		}
	}
}
TRK_ulema_small_decrease_effect = {
	TRK_ulema_bop_small_decrease_effect = yes
	TRK_ulema_pop_small_decrease_effect = yes	
}
TRK_ulema_bop_medium_decrease_effect = {
	if = {
		limit = { has_any_power_balance = yes }
		if = {
			limit = { 
				OR = {
					is_power_balance_side_active = { id = TRK_dual_power_bop side = TRK_ulema_side }
					is_power_balance_side_active = { id = TRK_dual_power_bop side = TRK_ulema_left_side }
				} 
			}
			if = {
				limit = { 
					is_power_balance_side_active = {
						id = TRK_dual_power_bop
						side = TRK_ulema_left_side
					}
				}
				add_power_balance_value = {
					id = TRK_dual_power_bop
					value = 0.06
				}
			}
			else = {
				add_power_balance_value = {
					id = TRK_dual_power_bop
					value = -0.06
				}
			}
		}
	}
}
TRK_ulema_pop_medium_decrease_effect = {
	if = {
		limit = { 
			TRK_katta_ergash_in_power = yes 
		}
		add_popularity = {
			ideology = authoritarian_democrat
			popularity = -0.03
		}
	}
	else = {
		add_popularity = {
			ideology = social_conservative
			popularity = -0.03
		}
	}
}
TRK_ulema_medium_decrease_effect = {
	TRK_ulema_bop_medium_decrease_effect = yes
	TRK_ulema_pop_medium_decrease_effect = yes	
}
TRK_ulema_bop_large_decrease_effect = {
	if = {
		limit = { has_any_power_balance = yes }
		if = {
			limit = { 
				OR = {
					is_power_balance_side_active = { id = TRK_dual_power_bop side = TRK_ulema_side }
					is_power_balance_side_active = { id = TRK_dual_power_bop side = TRK_ulema_left_side }
				} 
			}
			if = {
				limit = { 
					is_power_balance_side_active = {
						id = TRK_dual_power_bop
						side = TRK_ulema_left_side
					}
				}
				add_power_balance_value = {
					id = TRK_dual_power_bop
					value = 0.10
				}
			}
			else = {
				add_power_balance_value = {
					id = TRK_dual_power_bop
					value = -0.10
				}
			}
		}
	}
}
TRK_ulema_pop_large_decrease_effect = {
	if = {
		limit = { 
			TRK_katta_ergash_in_power = yes 
		}
		add_popularity = {
			ideology = authoritarian_democrat
			popularity = -0.05
		}
	}
	else = {
		add_popularity = {
			ideology = social_conservative
			popularity = -0.05
		}
	}
}
TRK_ulema_large_decrease_effect = {
	TRK_ulema_bop_large_decrease_effect = yes
	TRK_ulema_pop_large_decrease_effect = yes	
}
TRK_ulema_bop_mega_decrease_effect = {
	if = {
		limit = { has_any_power_balance = yes }
		if = {
			limit = { 
				OR = {
					is_power_balance_side_active = { id = TRK_dual_power_bop side = TRK_ulema_side }
					is_power_balance_side_active = { id = TRK_dual_power_bop side = TRK_ulema_left_side }
				} 
			}
			if = {
				limit = { 
					is_power_balance_side_active = {
						id = TRK_dual_power_bop
						side = TRK_ulema_left_side
					}
				}
				add_power_balance_value = {
					id = TRK_dual_power_bop
					value = 0.20
				}
			}
			else = {
				add_power_balance_value = {
					id = TRK_dual_power_bop
					value = -0.20
				}
			}
		}
	}
}
TRK_ulema_pop_mega_decrease_effect = {
	if = {
		limit = { 
			TRK_katta_ergash_in_power = yes 
		}
		add_popularity = {
			ideology = authoritarian_democrat
			popularity = -0.10
		}
	}
	else = {
		add_popularity = {
			ideology = social_conservative
			popularity = -0.10
		}
	}
}
TRK_ulema_mega_decrease_effect = {
	TRK_ulema_bop_mega_decrease_effect = yes
	TRK_ulema_pop_mega_decrease_effect = yes	
}
# Kurshirmat
TRK_mujahideen_bop_small_decrease_effect = {
	if = {
		limit = { has_any_power_balance = yes }
		if = {
			limit = { is_power_balance_side_active = { id = TRK_dual_power_bop side = TRK_kurshirmat_side } }
			add_power_balance_value = {
				id = TRK_dual_power_bop
				value = -0.02
			}
		}
	}
}
TRK_mujahideen_pop_small_decrease_effect = {
	add_popularity = {
		ideology = national_populist
		popularity = -0.01
	}
}
TRK_mujahideen_small_decrease_effect = {
	TRK_mujahideen_bop_small_decrease_effect = yes
	TRK_mujahideen_pop_small_decrease_effect = yes	
}
TRK_mujahideen_bop_medium_decrease_effect = {
	if = {
		limit = { has_any_power_balance = yes }
		if = {
			limit = { is_power_balance_side_active = { id = TRK_dual_power_bop side = TRK_kurshirmat_side } }
			add_power_balance_value = {
				id = TRK_dual_power_bop
				value = -0.06
			}
		}
	}
}
TRK_mujahideen_pop_medium_decrease_effect = {
	add_popularity = {
		ideology = national_populist
		popularity = -0.03
	}
}
TRK_mujahideen_medium_decrease_effect = {
	TRK_mujahideen_bop_medium_decrease_effect = yes
	TRK_mujahideen_pop_medium_decrease_effect = yes	
}
TRK_mujahideen_bop_large_decrease_effect = {
	if = {
		limit = { has_any_power_balance = yes }
		if = {
			limit = { is_power_balance_side_active = { id = TRK_dual_power_bop side = TRK_kurshirmat_side } }
			add_power_balance_value = {
				id = TRK_dual_power_bop
				value = -0.10
			}
		}
	}
}
TRK_mujahideen_pop_large_decrease_effect = {
	add_popularity = {
		ideology = national_populist
		popularity = -0.05
	}
}
TRK_mujahideen_large_decrease_effect = {
	TRK_mujahideen_bop_large_decrease_effect = yes
	TRK_mujahideen_pop_large_decrease_effect = yes	
}
TRK_mujahideen_bop_mega_decrease_effect = {
	if = {
		limit = { has_any_power_balance = yes }
		if = {
			limit = { is_power_balance_side_active = { id = TRK_dual_power_bop side = TRK_kurshirmat_side } }
			add_power_balance_value = {
				id = TRK_dual_power_bop
				value = -0.20
			}
		}
	}
}
TRK_mujahideen_pop_mega_decrease_effect = {
	add_popularity = {
		ideology = national_populist
		popularity = -0.10
	}
}
TRK_mujahideen_mega_decrease_effect = {
	TRK_mujahideen_bop_mega_decrease_effect = yes
	TRK_mujahideen_pop_mega_decrease_effect = yes	
}
# ERK
TRK_erk_bop_small_effect = {
	if = {
		limit = { has_any_power_balance = yes }
		if = {
			limit = { is_power_balance_side_active = { id = TRK_dual_power_bop side = TRK_erk_side } }
			add_power_balance_value = {
				id = TRK_dual_power_bop
				value = -0.02
			}
		}
	}
}
TRK_erk_pop_small_effect = {
	if = {
		limit = { 
			TRK_erk_in_power = yes 
			has_country_leader = { name = "Nazir Toraqulov" ruling_only = yes }
		}
		add_popularity = {
			ideology = syndicalist
			popularity = 0.005
		}
		add_popularity = {
			ideology = radical_socialist
			popularity = 0.01
		}
	}
	else = {
		add_popularity = {
			ideology = syndicalist
			popularity = 0.01
		}
		add_popularity = {
			ideology = radical_socialist
			popularity = 0.005
		}
	}
}
TRK_erk_small_effect = {
	TRK_erk_bop_small_effect = yes
	TRK_erk_pop_small_effect = yes	
}
TRK_erk_bop_medium_effect = {
	if = {
		limit = { has_any_power_balance = yes }
		if = {
			limit = { is_power_balance_side_active = { id = TRK_dual_power_bop side = TRK_erk_side } }
			add_power_balance_value = {
				id = TRK_dual_power_bop
				value = -0.06
			}
		}
	}
}
TRK_erk_pop_medium_effect = {
	if = {
		limit = { 
			TRK_erk_in_power = yes 
			has_country_leader = { name = "Nazir Toraqulov" ruling_only = yes }
		}
		add_popularity = {
			ideology = syndicalist
			popularity = 0.01
		}
		add_popularity = {
			ideology = radical_socialist
			popularity = 0.03
		}
	}
	else = {
		add_popularity = {
			ideology = syndicalist
			popularity = 0.03
		}
		add_popularity = {
			ideology = radical_socialist
			popularity = 0.01
		}
	}
}
TRK_erk_medium_effect = {
	TRK_erk_bop_medium_effect = yes
	TRK_erk_pop_medium_effect = yes	
}
TRK_erk_bop_large_effect = {
	if = {
		limit = { has_any_power_balance = yes }
		if = {
			limit = { is_power_balance_side_active = { id = TRK_dual_power_bop side = TRK_erk_side } }
			add_power_balance_value = {
				id = TRK_dual_power_bop
				value = -0.10
			}
		}
	}
}
TRK_erk_pop_large_effect = {
	if = {
		limit = { 
			TRK_erk_in_power = yes 
			has_country_leader = { name = "Nazir Toraqulov" ruling_only = yes }
		}
		add_popularity = {
			ideology = syndicalist
			popularity = 0.02
		}
		add_popularity = {
			ideology = radical_socialist
			popularity = 0.05
		}
	}
	else = {
		add_popularity = {
			ideology = syndicalist
			popularity = 0.05
		}
		add_popularity = {
			ideology = radical_socialist
			popularity = 0.02
		}
	}
}
TRK_erk_large_effect = {
	TRK_erk_bop_large_effect = yes
	TRK_erk_pop_large_effect = yes	
}
TRK_erk_bop_mega_effect = {
	if = {
		limit = { has_any_power_balance = yes }
		if = {
			limit = { is_power_balance_side_active = { id = TRK_dual_power_bop side = TRK_erk_side } }
			add_power_balance_value = {
				id = TRK_dual_power_bop
				value = -0.20
			}
		}
	}
}
TRK_erk_pop_mega_effect = {
	if = {
		limit = { 
			TRK_erk_in_power = yes 
			has_country_leader = { name = "Nazir Toraqulov" ruling_only = yes }
		}
		add_popularity = {
			ideology = syndicalist
			popularity = 0.05
		}
		add_popularity = {
			ideology = radical_socialist
			popularity = 0.1
		}
	}
	else = {
		add_popularity = {
			ideology = syndicalist
			popularity = 0.1
		}
		add_popularity = {
			ideology = radical_socialist
			popularity = 0.05
		}
	}
}
TRK_erk_mega_effect = {
	TRK_erk_bop_mega_effect = yes
	TRK_erk_pop_mega_effect = yes	
}
# Shokai
TRK_shokai_bop_small_effect = {
	if = {
		limit = { has_any_power_balance = yes }
		if = {
			limit = { 
				OR = {
					is_power_balance_side_active = { id = TRK_dual_power_bop side = TRK_shokai_side }
					is_power_balance_side_active = { id = TRK_dual_power_bop side = TRK_shokai_right_side }
				} 
			}
			if = {
				limit = { 
					is_power_balance_side_active = {
						id = TRK_dual_power_bop
						side = TRK_shokai_right_side
					}
				}
				add_power_balance_value = {
					id = TRK_dual_power_bop
					value = 0.02
				}
			}
			else = {
				add_power_balance_value = {
					id = TRK_dual_power_bop
					value = -0.02
				}
			}
		}
	}
}
TRK_shokai_pop_small_effect = {
	if = {
		limit = { 
			TRK_shokai_in_power = yes 
			has_country_flag = TRK_shokai_authoritarian
		}
		add_popularity = {
			ideology = authoritarian_democrat
			popularity = 0.01
		}
	}
	else = {
		add_popularity = {
			ideology = social_liberal
			popularity = 0.01
		}
	}
}
TRK_shokai_small_effect = {
	TRK_shokai_bop_small_effect = yes
	TRK_shokai_pop_small_effect = yes	
}
TRK_shokai_bop_medium_effect = {
	if = {
		limit = { has_any_power_balance = yes }
		if = {
			limit = { 
				OR = {
					is_power_balance_side_active = { id = TRK_dual_power_bop side = TRK_shokai_side }
					is_power_balance_side_active = { id = TRK_dual_power_bop side = TRK_shokai_right_side }
				} 
			}
			if = {
				limit = { 
					is_power_balance_side_active = {
						id = TRK_dual_power_bop
						side = TRK_shokai_right_side
					}
				}
				add_power_balance_value = {
					id = TRK_dual_power_bop
					value = 0.06
				}
			}
			else = {
				add_power_balance_value = {
					id = TRK_dual_power_bop
					value = -0.06
				}
			}
		}
	}
}
TRK_shokai_pop_medium_effect = {
	if = {
		limit = { 
			TRK_shokai_in_power = yes 
			has_country_flag = TRK_shokai_authoritarian
		}
		add_popularity = {
			ideology = authoritarian_democrat
			popularity = 0.03
		}
	}
	else = {
		add_popularity = {
			ideology = social_liberal
			popularity = 0.03
		}
	}
}
TRK_shokai_medium_effect = {
	TRK_shokai_bop_medium_effect = yes
	TRK_shokai_pop_medium_effect = yes	
}
TRK_shokai_bop_large_effect = {
	if = {
		limit = { has_any_power_balance = yes }
		if = {
			limit = { 
				OR = {
					is_power_balance_side_active = { id = TRK_dual_power_bop side = TRK_shokai_side }
					is_power_balance_side_active = { id = TRK_dual_power_bop side = TRK_shokai_right_side }
				} 
			}
			if = {
				limit = { 
					is_power_balance_side_active = {
						id = TRK_dual_power_bop
						side = TRK_shokai_right_side
					}
				}
				add_power_balance_value = {
					id = TRK_dual_power_bop
					value = 0.10
				}
			}
			else = {
				add_power_balance_value = {
					id = TRK_dual_power_bop
					value = -0.10
				}
			}
		}
	}
}
TRK_shokai_pop_large_effect = {
	if = {
		limit = { 
			TRK_shokai_in_power = yes 
			has_country_flag = TRK_shokai_authoritarian
		}
		add_popularity = {
			ideology = authoritarian_democrat
			popularity = 0.05
		}
	}
	else = {
		add_popularity = {
			ideology = social_liberal
			popularity = 0.05
		}
	}
}
TRK_shokai_large_effect = {
	TRK_shokai_bop_large_effect = yes
	TRK_shokai_pop_large_effect = yes	
}
TRK_shokai_bop_mega_effect = {
	if = {
		limit = { has_any_power_balance = yes }
		if = {
			limit = { 
				OR = {
					is_power_balance_side_active = { id = TRK_dual_power_bop side = TRK_shokai_side }
					is_power_balance_side_active = { id = TRK_dual_power_bop side = TRK_shokai_right_side }
				} 
			}
			if = {
				limit = { 
					is_power_balance_side_active = {
						id = TRK_dual_power_bop
						side = TRK_shokai_right_side
					}
				}
				add_power_balance_value = {
					id = TRK_dual_power_bop
					value = 0.20
				}
			}
			else = {
				add_power_balance_value = {
					id = TRK_dual_power_bop
					value = -0.20
				}
			}
		}
	}
}
TRK_shokai_pop_mega_effect = {
	if = {
		limit = { 
			TRK_shokai_in_power = yes 
			has_country_flag = TRK_shokai_authoritarian
		}
		add_popularity = {
			ideology = authoritarian_democrat
			popularity = 0.10
		}
	}
	else = {
		add_popularity = {
			ideology = social_liberal
			popularity = 0.10
		}
	}
}
TRK_shokai_mega_effect = {
	TRK_shokai_bop_mega_effect = yes
	TRK_shokai_pop_mega_effect = yes	
}
# Ferghana
TRK_ferghana_bop_small_effect = {
	if = {
		limit = { has_any_power_balance = yes }
		if = {
			limit = { 
				is_power_balance_side_active = { id = TRK_dual_power_bop side = TRK_madamin_side }
			}
			add_power_balance_value = {
				id = TRK_dual_power_bop
				value = 0.02
			}
		}
	}
}
TRK_ferghana_pop_small_effect = {
	add_popularity = {
		ideology = paternal_autocrat
		popularity = 0.01
	}
}
TRK_ferghana_small_effect = {
	TRK_ferghana_bop_small_effect = yes
	TRK_ferghana_pop_small_effect = yes	
}
TRK_ferghana_bop_medium_effect = {
	if = {
		limit = { has_any_power_balance = yes }
		if = {
			limit = { 
				is_power_balance_side_active = { id = TRK_dual_power_bop side = TRK_madamin_side }
			}
			add_power_balance_value = {
				id = TRK_dual_power_bop
				value = 0.06
			}
		}
	}
}
TRK_ferghana_pop_medium_effect = {
	add_popularity = {
		ideology = paternal_autocrat
		popularity = 0.03
	}
}
TRK_ferghana_medium_effect = {
	TRK_ferghana_bop_medium_effect = yes
	TRK_ferghana_pop_medium_effect = yes	
}
TRK_ferghana_bop_large_effect = {
	if = {
		limit = { has_any_power_balance = yes }
		if = {
			limit = { 
				is_power_balance_side_active = { id = TRK_dual_power_bop side = TRK_madamin_side }
			}
			add_power_balance_value = {
				id = TRK_dual_power_bop
				value = 0.10
			}
		}
	}
}
TRK_ferghana_pop_large_effect = {
	add_popularity = {
		ideology = paternal_autocrat
		popularity = 0.05
	}
}
TRK_ferghana_large_effect = {
	TRK_ferghana_bop_large_effect = yes
	TRK_ferghana_pop_large_effect = yes	
}
TRK_ferghana_bop_mega_effect = {
	if = {
		limit = { has_any_power_balance = yes }
		if = {
			limit = { 
				is_power_balance_side_active = { id = TRK_dual_power_bop side = TRK_madamin_side }
			}
			add_power_balance_value = {
				id = TRK_dual_power_bop
				value = 0.20
			}
		}
	}
}
TRK_ferghana_pop_mega_effect = {
	add_popularity = {
		ideology = paternal_autocrat
		popularity = 0.10
	}
}
TRK_ferghana_mega_effect = {
	TRK_ferghana_bop_mega_effect = yes
	TRK_ferghana_pop_mega_effect = yes	
}
# Ulema
TRK_ulema_bop_small_effect = {
	if = {
		limit = { has_any_power_balance = yes }
		if = {
			limit = { 
				OR = {
					is_power_balance_side_active = { id = TRK_dual_power_bop side = TRK_ulema_side }
					is_power_balance_side_active = { id = TRK_dual_power_bop side = TRK_ulema_left_side }
				} 
			}
			if = {
				limit = { 
					is_power_balance_side_active = {
						id = TRK_dual_power_bop
						side = TRK_ulema_left_side
					}
				}
				add_power_balance_value = {
					id = TRK_dual_power_bop
					value = -0.02
				}
			}
			else = {
				add_power_balance_value = {
					id = TRK_dual_power_bop
					value = 0.02
				}
			}
		}
	}
}
TRK_ulema_pop_small_effect = {
	if = {
		limit = { 
			TRK_katta_ergash_in_power = yes 
		}
		add_popularity = {
			ideology = authoritarian_democrat
			popularity = 0.01
		}
	}
	else = {
		add_popularity = {
			ideology = social_conservative
			popularity = 0.01
		}
	}
}
TRK_ulema_small_effect = {
	TRK_ulema_bop_small_effect = yes
	TRK_ulema_pop_small_effect = yes	
}
TRK_ulema_bop_medium_effect = {
	if = {
		limit = { has_any_power_balance = yes }
		if = {
			limit = { 
				OR = {
					is_power_balance_side_active = { id = TRK_dual_power_bop side = TRK_ulema_side }
					is_power_balance_side_active = { id = TRK_dual_power_bop side = TRK_ulema_left_side }
				} 
			}
			if = {
				limit = { 
					is_power_balance_side_active = {
						id = TRK_dual_power_bop
						side = TRK_ulema_left_side
					}
				}
				add_power_balance_value = {
					id = TRK_dual_power_bop
					value = -0.06
				}
			}
			else = {
				add_power_balance_value = {
					id = TRK_dual_power_bop
					value = 0.06
				}
			}
		}
	}
}
TRK_ulema_pop_medium_effect = {
	if = {
		limit = { 
			TRK_katta_ergash_in_power = yes 
		}
		add_popularity = {
			ideology = authoritarian_democrat
			popularity = 0.03
		}
	}
	else = {
		add_popularity = {
			ideology = social_conservative
			popularity = 0.03
		}
	}
}
TRK_ulema_medium_effect = {
	TRK_ulema_bop_medium_effect = yes
	TRK_ulema_pop_medium_effect = yes	
}
TRK_ulema_bop_large_effect = {
	if = {
		limit = { has_any_power_balance = yes }
		if = {
			limit = { 
				OR = {
					is_power_balance_side_active = { id = TRK_dual_power_bop side = TRK_ulema_side }
					is_power_balance_side_active = { id = TRK_dual_power_bop side = TRK_ulema_left_side }
				} 
			}
			if = {
				limit = { 
					is_power_balance_side_active = {
						id = TRK_dual_power_bop
						side = TRK_ulema_left_side
					}
				}
				add_power_balance_value = {
					id = TRK_dual_power_bop
					value = -0.10
				}
			}
			else = {
				add_power_balance_value = {
					id = TRK_dual_power_bop
					value = 0.10
				}
			}
		}
	}
}
TRK_ulema_pop_large_effect = {
	if = {
		limit = { 
			TRK_katta_ergash_in_power = yes 
		}
		add_popularity = {
			ideology = authoritarian_democrat
			popularity = 0.05
		}
	}
	else = {
		add_popularity = {
			ideology = social_conservative
			popularity = 0.05
		}
	}
}
TRK_ulema_large_effect = {
	TRK_ulema_bop_large_effect = yes
	TRK_ulema_pop_large_effect = yes	
}
TRK_ulema_bop_mega_effect = {
	if = {
		limit = { has_any_power_balance = yes }
		if = {
			limit = { 
				OR = {
					is_power_balance_side_active = { id = TRK_dual_power_bop side = TRK_ulema_side }
					is_power_balance_side_active = { id = TRK_dual_power_bop side = TRK_ulema_left_side }
				} 
			}
			if = {
				limit = { 
					is_power_balance_side_active = {
						id = TRK_dual_power_bop
						side = TRK_ulema_left_side
					}
				}
				add_power_balance_value = {
					id = TRK_dual_power_bop
					value = -0.20
				}
			}
			else = {
				add_power_balance_value = {
					id = TRK_dual_power_bop
					value = 0.20
				}
			}
		}
	}
}
TRK_ulema_pop_mega_effect = {
	if = {
		limit = { 
			TRK_katta_ergash_in_power = yes 
		}
		add_popularity = {
			ideology = authoritarian_democrat
			popularity = 0.10
		}
	}
	else = {
		add_popularity = {
			ideology = social_conservative
			popularity = 0.10
		}
	}
}
TRK_ulema_mega_effect = {
	TRK_ulema_bop_mega_effect = yes
	TRK_ulema_pop_mega_effect = yes	
}
# Kurshirmat
TRK_mujahideen_bop_small_effect = {
	if = {
		limit = { has_any_power_balance = yes }
		if = {
			limit = { is_power_balance_side_active = { id = TRK_dual_power_bop side = TRK_kurshirmat_side } }
			add_power_balance_value = {
				id = TRK_dual_power_bop
				value = 0.02
			}
		}
	}
}
TRK_mujahideen_pop_small_effect = {
	add_popularity = {
		ideology = national_populist
		popularity = 0.01
	}
}
TRK_mujahideen_small_effect = {
	TRK_mujahideen_bop_small_effect = yes
	TRK_mujahideen_pop_small_effect = yes	
}
TRK_mujahideen_bop_medium_effect = {
	if = {
		limit = { has_any_power_balance = yes }
		if = {
			limit = { is_power_balance_side_active = { id = TRK_dual_power_bop side = TRK_kurshirmat_side } }
			add_power_balance_value = {
				id = TRK_dual_power_bop
				value = 0.06
			}
		}
	}
}
TRK_mujahideen_pop_medium_effect = {
	add_popularity = {
		ideology = national_populist
		popularity = 0.03
	}
}
TRK_mujahideen_medium_effect = {
	TRK_mujahideen_bop_medium_effect = yes
	TRK_mujahideen_pop_medium_effect = yes	
}
TRK_mujahideen_bop_large_effect = {
	if = {
		limit = { has_any_power_balance = yes }
		if = {
			limit = { is_power_balance_side_active = { id = TRK_dual_power_bop side = TRK_kurshirmat_side } }
			add_power_balance_value = {
				id = TRK_dual_power_bop
				value = 0.10
			}
		}
	}
}
TRK_mujahideen_pop_large_effect = {
	add_popularity = {
		ideology = national_populist
		popularity = 0.05
	}
}
TRK_mujahideen_large_effect = {
	TRK_mujahideen_bop_large_effect = yes
	TRK_mujahideen_pop_large_effect = yes	
}
TRK_mujahideen_bop_mega_effect = {
	if = {
		limit = { has_any_power_balance = yes }
		if = {
			limit = { is_power_balance_side_active = { id = TRK_dual_power_bop side = TRK_kurshirmat_side } }
			add_power_balance_value = {
				id = TRK_dual_power_bop
				value = 0.20
			}
		}
	}
}
TRK_mujahideen_pop_mega_effect = {
	add_popularity = {
		ideology = national_populist
		popularity = 0.10
	}
}
TRK_mujahideen_mega_effect = {
	TRK_mujahideen_bop_mega_effect = yes
	TRK_mujahideen_pop_mega_effect = yes	
}
# Requires temp var civ_war_var_change
TRK_erk_civ_war_change = {
	custom_effect_tooltip = TRK_erk_civ_war_change
	add_to_variable = { TRK_erk_civ_war_var = civ_war_var_change }
}
TRK_shokai_civ_war_change = {
	custom_effect_tooltip = TRK_shokai_civ_war_change
	add_to_variable = { TRK_shokai_civ_war_var = civ_war_var_change }
}
TRK_ferghana_civ_war_change = {
	custom_effect_tooltip = TRK_ferghana_civ_war_change
	add_to_variable = { TRK_ferghana_civ_war_var = civ_war_var_change }
}
TRK_mujahideen_civ_war_change = {
	custom_effect_tooltip = TRK_mujahideen_civ_war_change
	add_to_variable = { TRK_mujahideen_civ_war_var = civ_war_var_change }
}
TRK_swap_shokai_with_ulema_side = {
	if = {
		limit = {
			is_power_balance_side_active = { id = TRK_dual_power_bop side = TRK_shokai_side }
		}
		if = {
			limit = {
				is_power_balance_side_active = { id = TRK_dual_power_bop side = TRK_kurshirmat_side }
			}
			set_power_balance = {
				id = TRK_dual_power_bop
				left_side = TRK_ulema_left_side
				right_side = TRK_kurshirmat_side
			}
		}
		else = {
			remove_power_balance = { id = TRK_dual_power_bop }
			remove_ideas = TRK_lasting_political_crisis
		}
	}
	else_if = {
		limit = {
			is_power_balance_side_active = { id = TRK_dual_power_bop side = TRK_shokai_right_side }
		}
		set_power_balance = {
			id = TRK_dual_power_bop
			left_side = TRK_erk_side
			right_side = TRK_ulema_side
		}
	}
}
TRK_swap_shokai_with_ergash_side = {
	if = {
		limit = {
			is_power_balance_side_active = { id = TRK_dual_power_bop side = TRK_shokai_side }
		}
		if = {
			limit = {
				is_power_balance_side_active = { id = TRK_dual_power_bop side = TRK_kurshirmat_side }
			}
			set_power_balance = {
				id = TRK_dual_power_bop
				left_side = TRK_ulema_left_side
				right_side = TRK_kurshirmat_side
			}
			set_power_balance_gfx = {
				id = TRK_dual_power_bop
				side = TRK_ulema_left_side
				gfx = GFX_bop_TRK_ergash_side
			}
		}
		else = {
			remove_power_balance = { id = TRK_dual_power_bop }
			remove_ideas = TRK_lasting_political_crisis
		}
	}
	else_if = {
		limit = {
			is_power_balance_side_active = { id = TRK_dual_power_bop side = TRK_shokai_right_side }
		}
		set_power_balance = {
			id = TRK_dual_power_bop
			left_side = TRK_erk_side
			right_side = TRK_ulema_side
		}
		set_power_balance_gfx = {
			id = TRK_dual_power_bop
			side = TRK_ulema_side
			gfx = GFX_bop_TRK_ergash_side
		}
	}
}
TRK_swap_monstrov_with_ergash_side = {
	if = {
		limit = {
			is_power_balance_side_active = { id = TRK_dual_power_bop side = TRK_madamin_side }
		}
		if = {
			limit = {
				is_power_balance_side_active = { id = TRK_dual_power_bop side = TRK_erk_side }
			}
			set_power_balance = {
				id = TRK_dual_power_bop
				left_side = TRK_erk_side
				right_side = TRK_ulema_side
			}
			set_power_balance_gfx = {
				id = TRK_dual_power_bop
				side = TRK_ulema_side
				gfx = GFX_bop_TRK_ergash_side
			}
		}
		else = {
			set_power_balance = {
				id = TRK_dual_power_bop
				left_side = TRK_shokai_side
				right_side = TRK_ulema_side
			}
			set_power_balance_gfx = {
				id = TRK_dual_power_bop
				side = TRK_ulema_side
				gfx = GFX_bop_TRK_ergash_side
			}
		}
	}
}
TRK_swap_erk_with_ergash_side = {
	if = {
		limit = {
			is_power_balance_side_active = { id = TRK_dual_power_bop side = TRK_erk_side }
		}
		if = {
			limit = {
				is_power_balance_side_active = { id = TRK_dual_power_bop side = TRK_shokai_right_side }
			}
			set_power_balance = {
				id = TRK_dual_power_bop
				left_side = TRK_ulema_left_side
				right_side = TRK_shokai_right_side
			}
			set_power_balance_gfx = {
				id = TRK_dual_power_bop
				side = TRK_ulema_left_side
				gfx = GFX_bop_TRK_ergash_side
			}
		}
		else_if = {
			limit = {
				is_power_balance_side_active = { id = TRK_dual_power_bop side = TRK_madamin_side }
			}
			set_power_balance = {
				id = TRK_dual_power_bop
				left_side = TRK_ulema_left_side
				right_side = TRK_madamin_side
			}
			set_power_balance_gfx = {
				id = TRK_dual_power_bop
				side = TRK_ulema_left_side
				gfx = GFX_bop_TRK_ergash_side
			}
		}
		else_if = {
			limit = {
				is_power_balance_side_active = { id = TRK_dual_power_bop side = TRK_kurshirmat_side }
			}
			set_power_balance = {
				id = TRK_dual_power_bop
				left_side = TRK_ulema_left_side
				right_side = TRK_kurshirmat_side
			}
			set_power_balance_gfx = {
				id = TRK_dual_power_bop
				side = TRK_ulema_left_side
				gfx = GFX_bop_TRK_ergash_side
			}
		}
		else = {
			remove_power_balance = { id = TRK_dual_power_bop }
			remove_ideas = TRK_lasting_political_crisis
		}
	}	
}
TRK_swap_kurshirmat_with_ergash_side = {
	if = {
		limit = {
			is_power_balance_side_active = { id = TRK_dual_power_bop side = TRK_kurshirmat_side }
		}
		if = {
			limit = {
				is_power_balance_side_active = { id = TRK_dual_power_bop side = TRK_shokai_side }
			}
			set_power_balance = {
				id = TRK_dual_power_bop
				left_side = TRK_shokai_side
				right_side = TRK_ulema_side
			}
			set_power_balance_gfx = {
				id = TRK_dual_power_bop
				side = TRK_ulema_side
				gfx = GFX_bop_TRK_ergash_side
			}
		}
		else_if = {
			limit = {
				is_power_balance_side_active = { id = TRK_dual_power_bop side = TRK_erk_side }
			}
			set_power_balance = {
				id = TRK_dual_power_bop
				left_side = TRK_erk_side
				right_side = TRK_ulema_side
			}
			set_power_balance_gfx = {
				id = TRK_dual_power_bop
				side = TRK_ulema_side
				gfx = GFX_bop_TRK_ergash_side
			}
		}
		else = {
			remove_power_balance = { id = TRK_dual_power_bop }
			remove_ideas = TRK_lasting_political_crisis
		}
	}	
}

TRK_swap_madamin_with_kurshirmat_side = {
	if = {			
		limit = {
			is_power_balance_side_active = { id = TRK_dual_power_bop side = TRK_madamin_side }
		}
		set_power_balance = {
			id = TRK_dual_power_bop
			left_side = TRK_erk_side
			right_side = TRK_kurshirmat_side
		}
	}
}
TRK_decrease_coalition_strength = {
	if = {
		limit = { has_country_flag = TRK_unstable_coalition }		
		custom_effect_tooltip = TRK_decrease_coalition_strength
		add_to_variable = { turkestan_coalition_stability = -1 }
		clamp_variable = { var = turkestan_coalition_stability min = 0 max = 4 }
	}
	TRK_ulema_medium_effect = yes
}
TRK_increase_coalition_strength = {
	if = {
		limit = { has_country_flag = TRK_unstable_coalition }
		custom_effect_tooltip = TRK_increase_coalition_strength
		add_to_variable = { turkestan_coalition_stability = 1 }	
		clamp_variable = { var = turkestan_coalition_stability min = 0 max = 4 }
	}
	TRK_ulema_small_effect = yes
}
TRK_end_coalition = {
	clr_country_flag = TRK_unstable_coalition
	set_temp_variable = { coalition_partner_var = token:social_conservative }
	remove_from_coalition = yes
	set_temp_variable = { coalition_partner_var = token:authoritarian_democrat }
	remove_from_coalition = yes
	clear_variable = turkestan_coalition_stability
	
	set_variable = { TRK_ittifoq_civ_war_var = party_popularity_100@social_conservative }
	subtract_from_variable = { TRK_shokai_civ_war_var = TRK_ittifoq_civ_war_var }
	#add_to_variable = { TRK_ferghana_civ_war_var = TRK_ittifoq_civ_war_var }
	#set_country_flag = TRK_ferghana_aligned_with_ittifoq
}
TRK_decrease_tvo_influence = {
	add_to_variable = { tvo_influence = -1 }
}
TRK_increase_tvo_influence = {
	add_to_variable = { tvo_influence = 1 }
}
TRK_setup_civil_war = {
	set_country_flag = TRK_civil_war_begins
	if = {
		limit = { has_country_flag = TRK_shokai_alliance_with_erk }
		every_owned_state = {
			limit = {
				OR = {
					state = 1042
					state = 1211
				}
			}
			set_demilitarized_zone = yes
		}
	}
	else = {
		every_owned_state = {
			limit = {
				NOT = { state = 1279 }
				NOT = { state = 1209 }
			}
			set_demilitarized_zone = yes
		}
	}
	if = {
		limit = { has_idea = TRK_paramilitary_activities }
		swap_ideas = {
			remove_idea = TRK_paramilitary_activities
			add_idea = TRK_civil_war
		}
	}
	else = {
		add_ideas = TRK_civil_war
	}
	clamp_variable = { var = TRK_shokai_civ_war_var min = 0 }
	clamp_variable = { var = TRK_erk_civ_war_var min = 0 }
	clamp_variable = { var = TRK_ferghana_civ_war_var min = 0 }
	clamp_variable = { var = TRK_mujahideen_civ_war_var min = 0 }
	hidden_effect = {
		every_other_country = {
			limit = {
				OR = {
					tag = UZB
					tag = KHI
					tag = AFG
					tag = PER
					tag = ALO
				}
				is_subject = no
			}
			if = {
				limit = { ALO_alash_party_in_power = yes }
				country_event = {
					id = turkestan_civil_war.5
					days = 2
					random = 48
				}
			}
			if = {
				limit = { KHI_junaid_or_eshi_in_power = yes }
				country_event = {
					id = khiva.6
					days = 2
					random = 48
				}
			}
			else = {
				country_event = {
					id = turkestan_civil_war.4
					days = 2
					random = 48
				}
			}
		}
	}
	if = {
		limit = { has_government = paternal_autocrat }
		country_event = {
			id = turkestan_civil_war.14
			days = 5
		}
	}
	else = {
		country_event = {
			id = turkestan_civil_war.11
			days = 5
		}
	}
}
TRK_madamin_bek_spawn_division = {
	if = {
		limit = {
			NOT = { has_template = "Mirshab Bo'limi" }
		}
		division_template = {
			name = "Mirshab Bo'limi"
			division_names_group = CA_MIL_01

			regiments = {
				militia = { x = 0 y = 0 }
				militia = { x = 0 y = 1 }
				militia = { x = 0 y = 2 }
				militia = { x = 0 y = 3 }
			}
			support = {
				military_police = { x = 0 y = 0 }
			}
		}					
	}

	random_owned_controlled_state = {
		prioritize = { 1279 }
		limit = {
			is_in_home_area = yes
			impassable = no
		}
		create_unit = {
			division = "division_template = \"Mirshab Bo'limi\" start_experience_factor = 0.1"
			owner = ROOT
			count = var:TRK_madamin_bek_divisions_to_spawn
		}
	}
}
TRK_create_tashkent_controlled_dummy = {
	hidden_effect = {
		# TSK #
		create_dynamic_country = {
			original_tag = TRK
			copy_tag = TRK

			save_global_event_target_as = tashkent
			set_cosmetic_tag = TRK_tashkent_government
			set_country_flag = KR_set_up_ai_templates
			
			set_politics = {
				ruling_party = syndicalist
				elections_allowed = no
			}
			add_ideas = {
				UPR_no_diplomacy
			}
			every_state = {
				limit = {
					is_core_of = event_target:tashkent
				}
				remove_core_of = event_target:tashkent
			}
			reserve_dynamic_country = yes			
		}
	}
}
TRK_recalc_civ_war_vars = {
	clamp_variable = { var = TRK_shokai_civ_war_var min = 0 }
	clamp_variable = { var = TRK_erk_civ_war_var min = 0 }
	clamp_variable = { var = TRK_ittifoq_civ_war_var min = 0 }
	clamp_variable = { var = TRK_ferghana_civ_war_var min = 0 }
	clamp_variable = { var = TRK_mujahideen_civ_war_var min = 0 }
}
#requires temp variable influence_change
TRK_erk_change_tude = {
	custom_effect_tooltip = TRK_erk_change_tude
	add_to_variable = { TRK_erk_influence_syn = influence_change }
	clamp_variable = { var = TRK_erk_influence_syn min = 0 }	
}
TRK_erk_change_revcom = {
	custom_effect_tooltip = TRK_erk_change_revcom
	add_to_variable = { TRK_erk_influence_rso = influence_change }
	clamp_variable = { var = TRK_erk_influence_rso min = 0 }
}

TRK_calculate_success_of_the_act = {
	set_variable = { TRK_bill_success = 0 }
	if = {
		limit = {
			check_variable = { TRK_erk_support > 30 }
		}
		add_to_variable = { TRK_bill_success = 1 }
	}
	if = {
		limit = {
			check_variable = { TRK_independent_support > 60 }
		}
		add_to_variable = { TRK_bill_success = 1 }
	}
	if = {
		limit = {
			check_variable = { TRK_ittifoqi_muslimin_support > 140 }
		}
		add_to_variable = { TRK_bill_success = 1 }
	}
	if = {
		limit = {
			check_variable = { TRK_milliy_ittihod_support > 140 }
		}
		add_to_variable = { TRK_bill_success = 1 }
	}
	if = {
		limit = {
			check_variable = { TRK_non_muslim_support > 120 }
		}
		add_to_variable = { TRK_bill_success = 1 }
	}
	if = {
		limit = {
			check_variable = { TRK_muslim_support > 250 }
		}
		add_to_variable = { TRK_bill_success = 1 }
	}
}
TRK_clamp_bill_variables = {
	clamp_variable = { var = TRK_independent_support min = 0 }
	clamp_variable = { var = TRK_erk_support min = 0 }
	clamp_variable = { var = TRK_erk_support min = 0 }
	clamp_variable = { var = TRK_milliy_ittihod_support min = 0 }
	clamp_variable = { var = TRK_muslim_support min = 0 }
	clamp_variable = { var = TRK_non_muslim_support min = 0 }
}
TRK_setup_silk_road = {
	unlock_decision_category_tooltip = TRK_silk_road_decision_category
	add_dynamic_modifier = { modifier = TRK_silk_road_modifier }
	hidden_effect = {
		activate_targeted_decision = { decision = TRK_trade_with_country target = TUR }
		activate_targeted_decision = { decision = TRK_trade_with_country target = AZE }
		activate_targeted_decision = { decision = TRK_trade_with_country target = PER }
		activate_targeted_decision = { decision = TRK_trade_with_country target = JBS }
		activate_targeted_decision = { decision = TRK_trade_with_country target = SAU }
		activate_targeted_decision = { decision = TRK_trade_with_country target = IRQ }
		activate_targeted_decision = { decision = TRK_trade_with_country target = AFG }
		activate_targeted_decision = { decision = TRK_trade_with_country target = DEH }
		activate_targeted_decision = { decision = TRK_trade_with_country target = ETS }
		activate_targeted_decision = { decision = TRK_trade_with_country target = MON }
		activate_targeted_decision = { decision = TRK_trade_with_country target = QIE }
	}
}
TRK_remove_silk_road = {
	if = {
		limit = { 
			has_dynamic_modifier = { modifier = TRK_silk_road_modifier }
		}
		custom_effect_tooltip = tooltip_white_line
		remove_dynamic_modifier = { modifier = TRK_silk_road_modifier }
		hidden_effect = {
			remove_targeted_decision = { decision = TRK_trade_with_country target = TUR }
			remove_targeted_decision = { decision = TRK_trade_with_country target = AZE }
			remove_targeted_decision = { decision = TRK_trade_with_country target = PER }
			remove_targeted_decision = { decision = TRK_trade_with_country target = JBS }
			remove_targeted_decision = { decision = TRK_trade_with_country target = SAU }
			remove_targeted_decision = { decision = TRK_trade_with_country target = IRQ }
			remove_targeted_decision = { decision = TRK_trade_with_country target = AFG }
			remove_targeted_decision = { decision = TRK_trade_with_country target = DEH }
			remove_targeted_decision = { decision = TRK_trade_with_country target = ETS }
			remove_targeted_decision = { decision = TRK_trade_with_country target = MON }
			remove_targeted_decision = { decision = TRK_trade_with_country target = QIE }
		}
	}
}

create_turkestani_faction = {
	if = {
		limit = {
			has_socialist_government = yes
			NOT = { tag = ALO }
		}
		create_faction = "Turkestani Popular Front"
	}
	else_if = {
		limit = {
			has_democratic_government = yes
			NOT = { tag = ALO }
		}
		create_faction = "Turkestani Democratic Alliance"
	}
	else_if = {
		limit = {
			has_dictatorship_government = yes
			NOT = { tag = ALO }
		}
		create_faction = "Turkestani Islamic Confederation"
	}
	else_if = {
		limit = {
			tag = ALO
		}
		create_faction = "Central Asian Confederation"
	}
	
}
TRK_setup_united_turkestan = {
	if = {
		limit = { 407 = { is_capital = no } }
		activate_targeted_decision = { decision = turkestan_move_capital target = ROOT }
	}
	hidden_effect = {
		set_temp_variable = { turkestan_tot_pop = TRK.party_popularity@totalist }
		add_to_temp_variable = { turkestan_tot_pop = UZB.party_popularity@totalist }
		add_to_temp_variable = { turkestan_tot_pop = KHI.party_popularity@totalist }
		divide_temp_variable = { turkestan_tot_pop = 3 }
		multiply_temp_variable = { turkestan_tot_pop = 100 }
		
		set_temp_variable = { turkestan_syn_pop = TRK.party_popularity@syndicalist }
		add_to_temp_variable = { turkestan_syn_pop = UZB.party_popularity@syndicalist }
		add_to_temp_variable = { turkestan_syn_pop = KHI.party_popularity@syndicalist }
		divide_temp_variable = { turkestan_syn_pop = 3 }
		multiply_temp_variable = { turkestan_syn_pop = 100 }
		
		set_temp_variable = { turkestan_rso_pop = TRK.party_popularity@radical_socialist }
		add_to_temp_variable = { turkestan_rso_pop = UZB.party_popularity@radical_socialist }
		add_to_temp_variable = { turkestan_rso_pop = KHI.party_popularity@radical_socialist }
		divide_temp_variable = { turkestan_rso_pop = 3 }
		multiply_temp_variable = { turkestan_rso_pop = 100 }
		
		set_temp_variable = { turkestan_sde_pop = TRK.party_popularity@social_democrat }
		add_to_temp_variable = { turkestan_sde_pop = UZB.party_popularity@social_democrat }
		add_to_temp_variable = { turkestan_sde_pop = KHI.party_popularity@social_democrat }
		divide_temp_variable = { turkestan_sde_pop = 3 }
		multiply_temp_variable = { turkestan_sde_pop = 100 }
		
		set_temp_variable = { turkestan_sli_pop = TRK.party_popularity@social_liberal }
		add_to_temp_variable = { turkestan_sli_pop = UZB.party_popularity@social_liberal }
		add_to_temp_variable = { turkestan_sli_pop = KHI.party_popularity@social_liberal }
		divide_temp_variable = { turkestan_sli_pop = 3 }
		multiply_temp_variable = { turkestan_sli_pop = 100 }
		
		set_temp_variable = { turkestan_mli_pop = TRK.party_popularity@market_liberal }
		add_to_temp_variable = { turkestan_mli_pop = UZB.party_popularity@market_liberal }
		add_to_temp_variable = { turkestan_mli_pop = KHI.party_popularity@market_liberal }
		divide_temp_variable = { turkestan_mli_pop = 3 }
		multiply_temp_variable = { turkestan_mli_pop = 100 }
		
		set_temp_variable = { turkestan_sco_pop = TRK.party_popularity@social_conservative }
		add_to_temp_variable = { turkestan_sco_pop = UZB.party_popularity@social_conservative }
		add_to_temp_variable = { turkestan_sco_pop = KHI.party_popularity@social_conservative }
		divide_temp_variable = { turkestan_sco_pop = 3 }
		multiply_temp_variable = { turkestan_sco_pop = 100 }
		
		set_temp_variable = { turkestan_ade_pop = TRK.party_popularity@authoritarian_democrat }
		add_to_temp_variable = { turkestan_ade_pop = UZB.party_popularity@authoritarian_democrat }
		add_to_temp_variable = { turkestan_ade_pop = KHI.party_popularity@authoritarian_democrat }
		divide_temp_variable = { turkestan_ade_pop = 3 }
		multiply_temp_variable = { turkestan_ade_pop = 100 }
		
		set_temp_variable = { turkestan_pau_pop = TRK.party_popularity@paternal_autocrat }
		add_to_temp_variable = { turkestan_pau_pop = UZB.party_popularity@paternal_autocrat }
		add_to_temp_variable = { turkestan_pau_pop = KHI.party_popularity@paternal_autocrat }
		divide_temp_variable = { turkestan_pau_pop = 3 }
		multiply_temp_variable = { turkestan_pau_pop = 100 }
		
		set_temp_variable = { turkestan_npo_pop = TRK.party_popularity@national_populist }
		add_to_temp_variable = { turkestan_npo_pop = UZB.party_popularity@national_populist }
		add_to_temp_variable = { turkestan_npo_pop = KHI.party_popularity@national_populist }
		divide_temp_variable = { turkestan_npo_pop = 3 }
		multiply_temp_variable = { turkestan_npo_pop = 100 }
		
		set_political_party = {
			ideology = totalist
			popularity = turkestan_tot_pop
		}
		set_political_party = {
			ideology = syndicalist
			popularity = turkestan_syn_pop
		}
		set_political_party = {
			ideology = radical_socialist
			popularity = turkestan_rso_pop
		}
		set_political_party = {
			ideology = social_democrat
			popularity = turkestan_sde_pop
		}
		set_political_party = {
			ideology = social_liberal
			popularity = turkestan_sli_pop
		}
		set_political_party = {
			ideology = social_conservative
			popularity = turkestan_sco_pop
		}
		set_political_party = {
			ideology = authoritarian_democrat
			popularity = turkestan_ade_pop
		}
		set_political_party = {
			ideology = paternal_autocrat
			popularity = turkestan_pau_pop
		}
		set_political_party = {
			ideology = national_populist
			popularity = turkestan_npo_pop
		}		
	}	
	if = {
		limit = { CA_is_ruled_by_british = no }
		every_other_country = {
			limit = { 
				is_central_asian_tag = yes 
				is_turkestan_tag = no
			}
			ROOT = { add_to_array = { turkestan_possible_allies_array = PREV } }
		}
	}
}
TRK_setup_modernisation = {
	set_variable = { ROOT.political_modernisation = 0 }
	set_variable = { ROOT.economic_modernisation = 0 }
	set_variable = { ROOT.social_modernisation = 0 }
	
	
	set_variable = { ROOT.turkestan_efficiency_gain = -0.1 } #economic
	set_variable = { ROOT.turkestan_construction_speed = -0.1 }  #economic
	set_variable = { ROOT.turkestan_research_speed = -0.20 }  #social
	set_variable = { ROOT.turkestan_monthly_population = -0.15 } #social
	
	TRK_setup_modernisation_for_each_tag = yes
}
TRK_setup_modernisation_for_each_tag = {
	add_dynamic_modifier = {
		modifier = turkestan_modernisation_modifier
	}
	
	hidden_effect = {
		if = {
			limit = { is_kokand_splinter_tag = yes }
			TRK_increase_social_modernisation = yes
			TRK_increase_economic_modernisation = yes
		}
		if = {
			limit = { tag = UZB }
			TRK_increase_economic_modernisation = yes
		}
		if = {
			limit = { tag = KHI }
			TRK_increase_economic_modernisation = yes
		}
		if = {
			limit = { tag = ALO }
			TRK_increase_economic_modernisation = yes
			TRK_increase_social_modernisation = yes
		}
	}
}
TRK_increase_political_modernisation = {
	add_political_power = 50
	add_stability = 0.05
}
TRK_decrease_political_modernisation = {
	add_political_power = -25
	add_stability = -0.05
}
TRK_increase_economic_modernisation = {
	if = {
		limit = {
			check_variable = { ROOT.economic_modernisation < 5 }
		}
		custom_effect_tooltip = TRK_increase_economic_modernisation
		hidden_effect = {
			add_to_variable = { ROOT.economic_modernisation = 1 }
			clamp_variable = { var = ROOT.economic_modernisation min = 0 max = 5 }
			
			add_to_variable = { ROOT.turkestan_efficiency_gain = 0.05 } #economic
			add_to_variable = { ROOT.turkestan_construction_speed = 0.05 }  #economic
			
			clamp_variable = { var = ROOT.turkestan_efficiency_gain min = -0.15 max = 0 }
			clamp_variable = { var = ROOT.turkestan_construction_speed min = -0.25 max = 0 }
		}
	}
}
TRK_decrease_economic_modernisation = {
	if = {
		limit = {
			check_variable = { ROOT.economic_modernisation > 0 }
		}
		custom_effect_tooltip = TRK_decrease_economic_modernisation
		hidden_effect = {
			add_to_variable = { ROOT.economic_modernisation = -1 }
			clamp_variable = { var = ROOT.economic_modernisation min = 0 max = 5 }
			
			add_to_variable = { ROOT.turkestan_efficiency_gain = -0.05 } #economic
			add_to_variable = { ROOT.turkestan_construction_speed = -0.05 }  #economic
			
			clamp_variable = { var = ROOT.turkestan_efficiency_gain min = -0.15 max = 0 }
			clamp_variable = { var = ROOT.turkestan_construction_speed min = -0.25 max = 0 }
		}
	}
}
TRK_increase_social_modernisation = {
	if = {
		limit = {
			check_variable = { ROOT.social_modernisation < 5 }
		}
		custom_effect_tooltip = TRK_increase_social_modernisation
		hidden_effect = {
			add_to_variable = { ROOT.social_modernisation = 1 }
			clamp_variable = { var = ROOT.social_modernisation min = 0 max = 5 }
			
			add_to_variable = { ROOT.turkestan_research_speed = 0.05 }  #social
			add_to_variable = { ROOT.turkestan_monthly_population = 0.05 } #social
			
			clamp_variable = { var = ROOT.turkestan_research_speed min = -0.25 max = 0 }
			clamp_variable = { var = ROOT.turkestan_monthly_population min = -0.3 max = 0 }
		}
	}
}
TRK_decrease_social_modernisation = {
	if = {
		limit = {
			check_variable = { ROOT.social_modernisation > 0 }
		}
		custom_effect_tooltip = TRK_decrease_social_modernisation
		hidden_effect = {
			add_to_variable = { ROOT.social_modernisation = -1 }
			clamp_variable = { var = ROOT.social_modernisation min = 0 max = 5 }
			
			add_to_variable = { ROOT.turkestan_research_speed = -0.05 }  #social
			add_to_variable = { ROOT.turkestan_monthly_population = -0.05 } #social
			
			clamp_variable = { var = ROOT.turkestan_research_speed min = -0.25 max = 0 }
			clamp_variable = { var = ROOT.turkestan_monthly_population min = -0.3 max = 0 }
		}
	}
}
TRK_swap_national_guard_with_peoples_militia = {
	if = {
		limit = { has_idea = TRK_national_guard_4 }
		swap_ideas = {
			remove_idea = TRK_national_guard_4
			add_idea = TRK_peoples_militia_3
		}
	}
	else_if = {
		limit = { has_idea = TRK_national_guard_3 }
		swap_ideas = {
			remove_idea = TRK_national_guard_3
			add_idea = TRK_peoples_militia_2
		}
	}
	else_if = {
		limit = { has_idea = TRK_national_guard_2 }
		swap_ideas = {
			remove_idea = TRK_national_guard_2
			add_idea = TRK_peoples_militia_1
		}
	}
	else_if = {
		limit = { has_idea = TRK_national_guard_1 }
		swap_ideas = {
			remove_idea = TRK_national_guard_1
			add_idea = TRK_peoples_militia_1
		}
	}
	else = {
		if = {
			limit = { has_idea = TRK_national_guard_5 }
			remove_ideas = TRK_national_guard_5
		}
		else_if = {
			limit = { has_idea = TRK_national_guard_6 }
			remove_ideas = TRK_national_guard_6
		}
		else_if = {
			limit = { has_idea = TRK_national_guard_7 }
			remove_ideas = TRK_national_guard_7
		}
		else_if = {
			limit = { has_idea = TRK_national_guard_8 }
			remove_ideas = TRK_national_guard_8
		}
	}
}
determine_where_basmachi_should_go = {
	if = {
		limit = {
			ROOT = {
				NOT = { tag = KHI }
				is_neighbor_of = KHI
			}
			KHI = { has_government = authoritarian_democrat }
			FROM = { 
				NOT = { tag = KHI }
			}
		}
		set_temp_variable = { target = KHI }
	}
	if = {
		limit = {
			ROOT = {
				NOT = { tag = UZB }
				is_neighbor_of = UZB
			}
			UZB = { has_dictatorship_government = yes }
			FROM = { 
				NOT = { tag = UZB }
			}
		}
		set_temp_variable = { target = UZB }
	}
	else_if = {
		limit = {
			ROOT = {
				NOT = { tag = TRK }
				is_neighbor_of = TRK
			}
			TRK = { has_dictatorship_government = yes }
			FROM = { 
				NOT = { tag = TRK }
			}
		}
		set_temp_variable = { target = TRK }
	}
	else_if = {
		limit = {
			ROOT = {
				NOT = { tag = TAJ }
				is_neighbor_of = TAJ
			}
			TAJ = { has_dictatorship_government = yes }
			FROM = { 
				NOT = { tag = TAJ }
			}
		}
		set_temp_variable = { target = TAJ }
	}
	else_if = {
		limit = {
			country_exists = AFG
			ROOT = { is_neighbor_of = AFG }
			FROM = { 
				NOT = { tag = AFG }
			}
		}
		set_temp_variable = { target = AFG }
	}
	else_if = {
		limit = {
			country_exists = ETS
			ROOT = { is_neighbor_of = ETS }
			FROM = { 
				NOT = { tag = ETS }
			}
		}
		set_temp_variable = { target = ETS }
	}
	else = {
		set_temp_variable = { target = XXA }
	}
}
basmachi_leave_region = {
	determine_where_basmachi_should_go = yes
	effect_tooltip = {
		every_unit_leader = {
			limit = {
				OR = {
					has_id = 68590
					has_id = 68593
					has_id = 68594
					has_id = 68595
					has_id = 68596
					has_id = 68598
					has_id = 68600
				}
			}
			retire = yes
		}
	}
	hidden_effect = {
		every_unit_leader = {
			limit = {
				OR = {
					has_id = 68590
					has_id = 68593
					has_id = 68594
					has_id = 68595
					has_id = 68596
					has_id = 68598
					has_id = 68600
				}
				NOT = { has_unit_leader_flag = loyal_mujahideen }
			}
			set_unit_leader_flag = exiled_mujahideen
			set_nationality = var:target							
		}						
		var:target = { 
			if = { 
				limit = {
					NOT = { tag = XXA }
				}
				country_event = turkestan_misc.200
			}
		}
	}	
}
emir_leaves_bukhara = {
	random_unit_leader = { limit = { has_id = 68596 }
		set_unit_leader_flag = UZB_original_leader
		set_nationality = AFG
		unit_leader_event = {
			id = turkestan_misc.201
			days = 1
			random = 50
			random_days = 5
		}
	}		
}

TRK_setup_kyrgyzstan_splinter = {
	KYR = {
		transfer_technology_without_doctrines = yes
		transfer_state = 586
		add_state_core = 586
		set_capital = { state = 586 }
		ALO = { give_guarantee = PREV }
		hidden_effect = {
			country_event = {
				id = kyr.1
				days = 2
			}
			add_offsite_building = { type = arms_factory level = 1 }
			586 = { 
				set_demilitarized_zone = no 
			}
			division_template = {
				name = "Militsiya"
				division_names_group = CA_MIL_01

				regiments = {
					militia = { x = 0 y = 0 }
					militia = { x = 0 y = 1 }
					militia = { x = 0 y = 2 }
					militia = { x = 0 y = 3 }
				}
				
			}
			division_template = {
				name = "Attar Belum"
				division_names_group = ALO_CAV_01

				regiments = {
					cavalry = { x = 0 y = 0 }
					cavalry = { x = 0 y = 1 }
					cavalry = { x = 0 y = 2 }
					cavalry = { x = 0 y = 3 }
				}
			}
			586 = {
				create_unit = {
					division = "division_template = \"Militsiya\" start_experience_factor = 0.1"
					count = 3
					owner = PREV
				}
			}
			set_party_name = {
				ideology = market_liberal
				name = TRK_market_liberal_party
				long_name = TRK_market_liberal_party_long
			}
			set_party_name = {
				ideology = social_conservative
				name = TRK_social_conservative_party
				long_name = TRK_social_conservative_party_long
			}
			set_party_name = {
				ideology = authoritarian_democrat
				name = TRK_authoritarian_democrat_party
				long_name = TRK_authoritarian_democrat_party_long
			}
			set_party_name = {
				ideology = paternal_autocrat
				name = TRK_national_populist_party
				long_name = TRK_national_populist_party_long
			}
			set_party_name = {
				ideology = national_populist
				name = TRK_national_populist_party
				long_name = TRK_national_populist_party_long
			}
		}
	}
	every_unit_leader = {
		limit = { has_unit_leader_flag = KYR_original_leader }
		if = {
			limit = { has_id = 68628 }
			promote_leader = yes
		}
		set_nationality = KYR
	}
}
determine_destination_of_exile_basmachi = {
	if = {
		limit = {
			ROOT = {
				NOT = { tag = KHI }
			}
			KHI = { has_authoritarian_government = yes }
		}
		set_temp_variable = { target = KHI }
	}
	if = {
		limit = {
			ROOT = {
				NOT = { tag = UZB }
			}
			UZB = { has_authoritarian_government = yes }
		}
		set_temp_variable = { target = UZB }
	}
	else_if = {
		limit = {
			ROOT = {
				NOT = { tag = TRK }
			}
			TRK = { has_government = national_populist }
		}
		set_temp_variable = { target = TRK }
	}
	else_if = {
		limit = {
			country_exists = AFG
			ROOT = { is_neighbor_of = AFG }
		}
		set_temp_variable = { target = AFG }
	}
	else_if = {
		limit = {
			country_exists = ETS
			ROOT = { is_neighbor_of = ETS }
		}
		set_temp_variable = { target = ETS }
	}
	else = {
		set_temp_variable = { target = XXA }
	}
}
determine_destination_of_exile_madamin_bek = {
	if = {
		limit = {
			country_exists = ETS
			ROOT = { is_neighbor_of = ETS }
		}
		set_temp_variable = { target = ETS }
	}
	else_if = {
		limit = {
			country_exists = AFG
			ROOT = { is_neighbor_of = AFG }
		}
		set_temp_variable = { target = AFG }
	}
	else_if = {
		limit = {
			ROOT = {
				NOT = { tag = UZB }
			}
			UZB = { has_authoritarian_government = yes }
		}
		set_temp_variable = { target = UZB }
	}
	else_if = {
		limit = {
			ROOT = {
				NOT = { tag = KHI }
			}
			KHI = { has_authoritarian_government = yes }
		}
		set_temp_variable = { target = KHI }
	}
	else = {
		set_temp_variable = { target = XXA }
	}
}
determine_destination_of_exile_erk = {
	if = {
		limit = {
			country_exists = BKN
			BKN = { has_authoritarian_government = no }
		}
		set_temp_variable = { target = BKN }
	}
	if = {
		limit = {
			ROOT = {
				NOT = { tag = ALO }
			}
			ALO = { has_authoritarian_government = no }
		}
		set_temp_variable = { target = ALO }
	}
	if = {
		limit = {
			ROOT = {
				NOT = { tag = KHI }
			}
			KHI = { has_authoritarian_government = no }
		}
		set_temp_variable = { target = KHI }
	}
	if = {
		limit = {
			ROOT = {
				NOT = { tag = UZB }
			}
			UZB = { has_authoritarian_government = no }
		}
		set_temp_variable = { target = UZB }
	}
	#else_if = {
	#	limit = {
	#		country_exists = AFG
	#		ROOT = { is_neighbor_of = AFG }
	#	}
	#	set_temp_variable = { target = AFG }
	#}
	else = {
		set_temp_variable = { target = XXA }
	}
}
determine_destination_of_exile_monstrovites = {
	if = {
		limit = {
			ROOT = {
				NOT = { tag = RUS }
			}
			RUS = { 
				has_socialist_government = no 
				has_left_democratic_government = no 
			}
		}
		set_temp_variable = { target = RUS }
	}
	else_if = {
		limit = {
			ROOT = {
				NOT = { tag = ORE }
			}
			ORE = { has_authoritarian_government = yes }
		}
		set_temp_variable = { target = ORE }
	}
	else = {
		set_temp_variable = { target = XXA }
	}
}
determine_destination_of_exile_democratic = {
	if = {
		limit = {
			ROOT = {
				NOT = { tag = KHI }
			}
			FROM = {
				NOT = { tag = KHI }
			}
			KHI = { has_dictatorship_government = no }
		}
		set_temp_variable = { target = KHI }
	}
	if = {
		limit = {
			ROOT = {
				NOT = { tag = UZB }
			}
			FROM = {
				NOT = { tag = UZB }
			}
			UZB = { has_dictatorship_government = no }
		}
		set_temp_variable = { target = UZB }
	}
	else_if = {
		limit = {
			ROOT = {
				NOT = { tag = TRK }
			}
			FROM = {
				NOT = { tag = TRK }
			}
			TRK = { has_dictatorship_government = no }
		}
		set_temp_variable = { target = TRK }
	}
	else_if = {
		limit = {
			ROOT = {
				NOT = { tag = ALO }
			}
			FROM = {
				NOT = { tag = ALO }
			}
			ALO = { 
				OR = {
					has_elected_government = yes 
					has_government = social_democrat
				}
			}
		}
		set_temp_variable = { target = ALO }
	}
	else_if = {
		limit = {
			country_exists = ETS
			ROOT = { is_neighbor_of = ETS }
			FROM = {
				NOT = { tag = ETS }
			}
		}
		set_temp_variable = { target = ETS }
	}
	else_if = {
		limit = {
			country_exists = AFG
			AFG = { has_democratic_government = yes }
			ROOT = { is_neighbor_of = AFG }
			FROM = {
				NOT = { tag = AFG }
			}
		}
		set_temp_variable = { target = AFG }
	}
	else = {
		set_temp_variable = { target = XXA }
	}
}
TRK_kurshirmat_leaves = {
	random_unit_leader = {
		limit = { has_id = 68598 }
		if = {
			limit = { is_field_marshal = yes }
			demote_if_marshal = yes			
		}
		set_unit_leader_flag = TRK_original_leader
		set_unit_leader_flag = exiled_mujahideen
		set_nationality = var:target
	}					
	var:target = { 
		if = { 
			limit = {
				NOT = { tag = XXA }
			}
			country_event = turkestan_misc.200
		}
	}
}
TRK_katta_ergash_leaves = {
	random_unit_leader = {
		limit = { has_id = 68600 }
		if = {
			limit = { is_field_marshal = yes }
			demote_if_marshal = yes			
		}
		set_unit_leader_flag = TRK_original_leader
		set_unit_leader_flag = exiled_mujahideen
		set_nationality = var:target
	}				
	var:target = { 
		if = { 
			limit = {
				NOT = { tag = XXA }
			}
			country_event = turkestan_misc.200
		}
	}
}
TRK_madamin_bek_leaves = {
	random_unit_leader = {
		limit = { has_id = 68597 }
		if = {
			limit = { is_field_marshal = yes }
			demote_if_marshal = yes			
		}
		set_unit_leader_flag = TRK_original_leader
		set_unit_leader_flag = exiled_mujahideen
		set_nationality = var:target
	}
	var:target = { 
		if = { 
			limit = {
				NOT = { tag = XXA }
			}
			country_event = turkestan_misc.200
		}
	}	
}
TRK_erk_leaves = {
	var:target = { 
		if = { 
			limit = {
				NOT = { tag = XXA }
			}
			country_event = turkestan_socialists.24 
		}
	}
	hidden_effect = {
		if = {
			limit = { has_unit_leader = 68626 }
			random_unit_leader = {
				limit = { has_id = 68626 }
				set_nationality = XXA
			}
		}
		if = {
			limit = { has_unit_leader = 68572 }
			random_unit_leader = {
				limit = { has_id = 68572 }
				set_nationality = XXA
			}
		}
		every_unit_leader = {
			limit = { 
				OR = {
					has_id = 68624
					has_id = 68625
					has_id = 68627
					has_id = 68628
					has_id = 68629
					has_id = 68630
					has_id = 68633
					has_id = 68615
					has_id = 68661
				}
			}
			set_unit_leader_flag = TRK_original_leader
			set_nationality = var:target
		}
	}
}
TRK_peasant_army_leaves = {
	random_unit_leader = {
		limit = { has_id = 68623 }
		set_unit_leader_flag = TRK_original_leader
		set_nationality = var:target
		unit_leader_event = {
			id = kyr.209
			days = 2
			random = 50
			random_days = 4
		}
	}
	random_unit_leader = {
		limit = { has_id = 68619 }
		set_unit_leader_flag = TRK_original_leader
		set_nationality = var:target
	}
}
UZB_basmachi_leave = {
	random_unit_leader = {
		limit = { has_id = 68594 }
		set_unit_leader_flag = UZB_original_leader
		set_nationality = var:target
		#unit_leader_event = {
		#	id = kyr.209
		#	days = 2
		#	random = 50
		#	random_days = 4
		#}
	}
	random_unit_leader = {
		limit = { has_id = 68595 }
		set_unit_leader_flag = UZB_original_leader
		set_nationality = var:target
	}
}
KHI_basmachi_leave = {
	if = {
		limit = { has_id = 68589 }
		random_unit_leader = {
			limit = { has_id = 68589 }
			set_unit_leader_flag = KHI_original_leader
			set_nationality = var:target
			#unit_leader_event = {
			#	id = kyr.207
			#	days = 2
			#	random = 50
			#	random_days = 4
			#}
		}
	}
	else_if = {
		limit = { has_id = 68590 }
		random_unit_leader = {
			limit = { has_id = 68590 }
			set_unit_leader_flag = KHI_original_leader
			set_nationality = var:target
			#unit_leader_event = {
			#	id = kyr.207
			#	days = 2
			#	random = 50
			#	random_days = 4
			#}
		}
	}
}
UZB_recruit_democrat_leaders = {
	hidden_effect = {
		every_other_country = {
			limit = { 
				OR = {
					has_unit_leader = 68597 
					has_unit_leader = 68599
				}
				NOT = { tag = TRK }
			}
		}
		if = {
			limit = { has_authoritarian_government = yes }
			every_other_country = {
				limit = { 
					OR = {
						has_unit_leader = 68600 
						has_unit_leader = 68597 
						has_unit_leader = 68599 
					}
					NOT = { tag = TRK }
				}
				every_unit_leader = {
					limit = { 
						OR = { 
							has_id = 68600 
							has_id = 68597
							has_id = 68599 
						}
					}
					set_unit_leader_flag = exiled_mujahideen
					set_nationality = ROOT
				}				
				var:target = { 
					if = { 
						limit = {
							NOT = { tag = XXA }
						}
						country_event = turkestan_misc.200
					}
				}
			}
		}
	}
}
UZB_recruit_erk_leaders = {
	hidden_effect = {
		every_other_country = {
			limit = { 
				OR = {
					has_unit_leader = 68624
					has_unit_leader = 68625
					has_unit_leader = 68627
					has_unit_leader = 68628
					has_unit_leader = 68629
					has_unit_leader = 68630
					has_unit_leader = 68631
					has_unit_leader = 68632
					has_unit_leader = 68633
					has_unit_leader = 68615
					has_unit_leader = 68661
				}
				NOT = { tag = TRK }
				NOT = { tag = TSK }
				NOT = { tag = UZB }
			}
			every_unit_leader = {
				limit = { 
					OR = {
						has_id = 68624
						has_id = 68625
						has_id = 68627
						has_id = 68628
						has_id = 68629
						has_id = 68630
						has_id = 68631
						has_id = 68632
						has_id = 68633
						has_id = 68615
						has_id = 68661
					}
				}
				set_nationality = ROOT
			}
		}
	}
}
UZB_recruit_basmachi_leaders = {
	hidden_effect = {
		every_other_country = {
			limit = { 
				OR = {
					has_unit_leader = 68594 
					has_unit_leader = 68595
				}					
				NOT = { tag = TRK }
			}
			every_unit_leader = {
				limit = { 
					OR = {
						has_id = 68594 
						has_id = 68595 
					}
				}
				set_unit_leader_flag = exiled_mujahideen
				set_nationality = ROOT
			}
		}
		every_other_country = {
			limit = { 
				OR = {
					has_unit_leader = 68589 
					has_unit_leader = 68590
				}					
				NOT = { tag = KHI }
				NOT = { tag = UZB }
			}
			every_unit_leader = {
				limit = { 
					OR = {
						has_id = 68589 
						has_id = 68590
					}
				}
				set_unit_leader_flag = exiled_mujahideen
				set_nationality = ROOT
			}
		}
		ROOT = { country_event = turkestan_misc.200 }
	}
}
